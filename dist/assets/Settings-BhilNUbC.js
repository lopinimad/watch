import{ap as hi,aq as Ye,r as u,j as s,I as ae,O as us,g as ce,H as gi,K as nt,q as fs,B as bi,ad as Ae,E as Xt}from"./vendor-BWxiYVu1.js";import{H as ss,r as we,J as tr,K as rs,O as En,L as mi,Q as on,R as pi,U as Pt,B as Ee,V as xi,u as nr,W as vi,X as Yt,Y as Gt,Z as sr,_ as rr,$ as yi,a0 as ir,a1 as Ps,a2 as wi,a3 as ar,I as Fe,a as de,a4 as ln,a5 as cn,a6 as me,a7 as is,a8 as B,a9 as ji,aa as Vt,ab as Jn,ac as or,ad as Ci,ae as Si,af as lr,ag as Ni,ah as Ei,ai as tn,aj as St,m as hs,ak as cr,al as Di,am as ki,an as dr,ao as Ti,ap as Ii,aq as Ms,ar as Oi,as as Ri,at as Ai,au as ur,c as Pi,av as Mi,aw as Ls,ax as _s,ay as Li,az as _i,aA as Bi,aB as Fi,aC as Ki,aD as Ui,aE as zi,aF as Hi}from"./index-Bhg6ALQw.js";var Dn={exports:{}};Dn.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=1,o=2,l=9007199254740991,c="[object Arguments]",f="[object Array]",b="[object AsyncFunction]",h="[object Boolean]",g="[object Date]",v="[object Error]",y="[object Function]",S="[object GeneratorFunction]",j="[object Map]",w="[object Number]",D="[object Null]",N="[object Object]",E="[object Promise]",k="[object Proxy]",A="[object RegExp]",O="[object Set]",T="[object String]",I="[object Symbol]",F="[object Undefined]",K="[object WeakMap]",_="[object ArrayBuffer]",$="[object DataView]",ee="[object Float32Array]",pe="[object Float64Array]",Ge="[object Int8Array]",qe="[object Int16Array]",te="[object Int32Array]",Je="[object Uint8Array]",je="[object Uint8ClampedArray]",Ke="[object Uint16Array]",Ze="[object Uint32Array]",q=/[\\^$.*+?()[\]{}|]/g,Ce=/^\[object .+?Constructor\]$/,De=/^(?:0|[1-9]\d*)$/,P={};P[ee]=P[pe]=P[Ge]=P[qe]=P[te]=P[Je]=P[je]=P[Ke]=P[Ze]=!0,P[c]=P[f]=P[_]=P[h]=P[$]=P[g]=P[v]=P[y]=P[j]=P[w]=P[N]=P[A]=P[O]=P[T]=P[K]=!1;var J=typeof Ye=="object"&&Ye&&Ye.Object===Object&&Ye,V=typeof self=="object"&&self&&self.Object===Object&&self,W=J||V||Function("return this")(),xe=t&&!t.nodeType&&t,M=xe&&!0&&e&&!e.nodeType&&e,ne=M&&M.exports===xe,oe=ne&&J.process,ke=function(){try{return oe&&oe.binding&&oe.binding("util")}catch{}}(),m=ke&&ke.isTypedArray;function Me(a,d){for(var x=-1,C=a==null?0:a.length,H=0,R=[];++x<C;){var Y=a[x];d(Y,x,a)&&(R[H++]=Y)}return R}function Ue(a,d){for(var x=-1,C=d.length,H=a.length;++x<C;)a[H+x]=d[x];return a}function gt(a,d){for(var x=-1,C=a==null?0:a.length;++x<C;)if(d(a[x],x,a))return!0;return!1}function p(a,d){for(var x=-1,C=Array(a);++x<a;)C[x]=d(x);return C}function U(a){return function(d){return a(d)}}function z(a,d){return a.has(d)}function rt(a,d){return a==null?void 0:a[d]}function it(a){var d=-1,x=Array(a.size);return a.forEach(function(C,H){x[++d]=[H,C]}),x}function Se(a,d){return function(x){return a(d(x))}}function Nt(a){var d=-1,x=Array(a.size);return a.forEach(function(C){x[++d]=C}),x}var Bt=Array.prototype,Ft=Function.prototype,Te=Object.prototype,ze=W["__core-js_shared__"],at=Ft.toString,Ne=Te.hasOwnProperty,Ie=function(){var a=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),vt=Te.toString,Kt=RegExp("^"+at.call(Ne).replace(q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Et=ne?W.Buffer:void 0,Qe=W.Symbol,yt=W.Uint8Array,Dt=Te.propertyIsEnumerable,kt=Bt.splice,He=Qe?Qe.toStringTag:void 0,Tt=Object.getOwnPropertySymbols,Ut=Et?Et.isBuffer:void 0,se=Se(Object.keys,Object),re=Ot(W,"DataView"),Z=Ot(W,"Map"),Oe=Ot(W,"Promise"),ue=Ot(W,"Set"),ie=Ot(W,"WeakMap"),fe=Ot(Object,"create"),ot=jt(re),Q=jt(Z),Le=jt(Oe),Re=jt(ue),_e=jt(ie),lt=Qe?Qe.prototype:void 0,Ve=lt?lt.valueOf:void 0;function he(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var C=a[d];this.set(C[0],C[1])}}function dt(){this.__data__=fe?fe(null):{},this.size=0}function wt(a){var d=this.has(a)&&delete this.__data__[a];return this.size-=d?1:0,d}function hn(a){var d=this.__data__;if(fe){var x=d[a];return x===r?void 0:x}return Ne.call(d,a)?d[a]:void 0}function Fn(a){var d=this.__data__;return fe?d[a]!==void 0:Ne.call(d,a)}function Kn(a,d){var x=this.__data__;return this.size+=this.has(a)?0:1,x[a]=fe&&d===void 0?r:d,this}he.prototype.clear=dt,he.prototype.delete=wt,he.prototype.get=hn,he.prototype.has=Fn,he.prototype.set=Kn;function et(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var C=a[d];this.set(C[0],C[1])}}function gn(){this.__data__=[],this.size=0}function Un(a){var d=this.__data__,x=xn(d,a);if(x<0)return!1;var C=d.length-1;return x==C?d.pop():kt.call(d,x,1),--this.size,!0}function zn(a){var d=this.__data__,x=xn(d,a);return x<0?void 0:d[x][1]}function Hn(a){return xn(this.__data__,a)>-1}function bn(a,d){var x=this.__data__,C=xn(x,a);return C<0?(++this.size,x.push([a,d])):x[C][1]=d,this}et.prototype.clear=gn,et.prototype.delete=Un,et.prototype.get=zn,et.prototype.has=Hn,et.prototype.set=bn;function ut(a){var d=-1,x=a==null?0:a.length;for(this.clear();++d<x;){var C=a[d];this.set(C[0],C[1])}}function Vn(){this.size=0,this.__data__={hash:new he,map:new(Z||et),string:new he}}function $n(a){var d=vn(this,a).delete(a);return this.size-=d?1:0,d}function mn(a){return vn(this,a).get(a)}function Wn(a){return vn(this,a).has(a)}function Xn(a,d){var x=vn(this,a),C=x.size;return x.set(a,d),this.size+=x.size==C?0:1,this}ut.prototype.clear=Vn,ut.prototype.delete=$n,ut.prototype.get=mn,ut.prototype.has=Wn,ut.prototype.set=Xn;function It(a){var d=-1,x=a==null?0:a.length;for(this.__data__=new ut;++d<x;)this.add(a[d])}function pn(a){return this.__data__.set(a,r),this}function Yn(a){return this.__data__.has(a)}It.prototype.add=It.prototype.push=pn,It.prototype.has=Yn;function ft(a){var d=this.__data__=new et(a);this.size=d.size}function Gn(){this.__data__=new et,this.size=0}function zr(a){var d=this.__data__,x=d.delete(a);return this.size=d.size,x}function Hr(a){return this.__data__.get(a)}function Vr(a){return this.__data__.has(a)}function $r(a,d){var x=this.__data__;if(x instanceof et){var C=x.__data__;if(!Z||C.length<n-1)return C.push([a,d]),this.size=++x.size,this;x=this.__data__=new ut(C)}return x.set(a,d),this.size=x.size,this}ft.prototype.clear=Gn,ft.prototype.delete=zr,ft.prototype.get=Hr,ft.prototype.has=Vr,ft.prototype.set=$r;function Wr(a,d){var x=yn(a),C=!x&&oi(a),H=!x&&!C&&qn(a),R=!x&&!C&&!H&&Rs(a),Y=x||C||H||R,ge=Y?p(a.length,String):[],ve=ge.length;for(var X in a)Ne.call(a,X)&&!(Y&&(X=="length"||H&&(X=="offset"||X=="parent")||R&&(X=="buffer"||X=="byteLength"||X=="byteOffset")||ni(X,ve)))&&ge.push(X);return ge}function xn(a,d){for(var x=a.length;x--;)if(ks(a[x][0],d))return x;return-1}function Xr(a,d,x){var C=d(a);return yn(a)?C:Ue(C,x(a))}function zt(a){return a==null?a===void 0?F:D:He&&He in Object(a)?ei(a):ai(a)}function Ss(a){return Ht(a)&&zt(a)==c}function Ns(a,d,x,C,H){return a===d?!0:a==null||d==null||!Ht(a)&&!Ht(d)?a!==a&&d!==d:Yr(a,d,x,C,Ns,H)}function Yr(a,d,x,C,H,R){var Y=yn(a),ge=yn(d),ve=Y?f:bt(a),X=ge?f:bt(d);ve=ve==c?N:ve,X=X==c?N:X;var Be=ve==N,tt=X==N,ye=ve==X;if(ye&&qn(a)){if(!qn(d))return!1;Y=!0,Be=!1}if(ye&&!Be)return R||(R=new ft),Y||Rs(a)?Es(a,d,x,C,H,R):Zr(a,d,ve,x,C,H,R);if(!(x&i)){var $e=Be&&Ne.call(a,"__wrapped__"),We=tt&&Ne.call(d,"__wrapped__");if($e||We){var mt=$e?a.value():a,ht=We?d.value():d;return R||(R=new ft),H(mt,ht,x,C,R)}}return ye?(R||(R=new ft),Qr(a,d,x,C,H,R)):!1}function Gr(a){if(!Os(a)||ri(a))return!1;var d=Ts(a)?Kt:Ce;return d.test(jt(a))}function qr(a){return Ht(a)&&Is(a.length)&&!!P[zt(a)]}function Jr(a){if(!ii(a))return se(a);var d=[];for(var x in Object(a))Ne.call(a,x)&&x!="constructor"&&d.push(x);return d}function Es(a,d,x,C,H,R){var Y=x&i,ge=a.length,ve=d.length;if(ge!=ve&&!(Y&&ve>ge))return!1;var X=R.get(a);if(X&&R.get(d))return X==d;var Be=-1,tt=!0,ye=x&o?new It:void 0;for(R.set(a,d),R.set(d,a);++Be<ge;){var $e=a[Be],We=d[Be];if(C)var mt=Y?C(We,$e,Be,d,a,R):C($e,We,Be,a,d,R);if(mt!==void 0){if(mt)continue;tt=!1;break}if(ye){if(!gt(d,function(ht,Ct){if(!z(ye,Ct)&&($e===ht||H($e,ht,x,C,R)))return ye.push(Ct)})){tt=!1;break}}else if(!($e===We||H($e,We,x,C,R))){tt=!1;break}}return R.delete(a),R.delete(d),tt}function Zr(a,d,x,C,H,R,Y){switch(x){case $:if(a.byteLength!=d.byteLength||a.byteOffset!=d.byteOffset)return!1;a=a.buffer,d=d.buffer;case _:return!(a.byteLength!=d.byteLength||!R(new yt(a),new yt(d)));case h:case g:case w:return ks(+a,+d);case v:return a.name==d.name&&a.message==d.message;case A:case T:return a==d+"";case j:var ge=it;case O:var ve=C&i;if(ge||(ge=Nt),a.size!=d.size&&!ve)return!1;var X=Y.get(a);if(X)return X==d;C|=o,Y.set(a,d);var Be=Es(ge(a),ge(d),C,H,R,Y);return Y.delete(a),Be;case I:if(Ve)return Ve.call(a)==Ve.call(d)}return!1}function Qr(a,d,x,C,H,R){var Y=x&i,ge=Ds(a),ve=ge.length,X=Ds(d),Be=X.length;if(ve!=Be&&!Y)return!1;for(var tt=ve;tt--;){var ye=ge[tt];if(!(Y?ye in d:Ne.call(d,ye)))return!1}var $e=R.get(a);if($e&&R.get(d))return $e==d;var We=!0;R.set(a,d),R.set(d,a);for(var mt=Y;++tt<ve;){ye=ge[tt];var ht=a[ye],Ct=d[ye];if(C)var As=Y?C(Ct,ht,ye,d,a,R):C(ht,Ct,ye,a,d,R);if(!(As===void 0?ht===Ct||H(ht,Ct,x,C,R):As)){We=!1;break}mt||(mt=ye=="constructor")}if(We&&!mt){var wn=a.constructor,jn=d.constructor;wn!=jn&&"constructor"in a&&"constructor"in d&&!(typeof wn=="function"&&wn instanceof wn&&typeof jn=="function"&&jn instanceof jn)&&(We=!1)}return R.delete(a),R.delete(d),We}function Ds(a){return Xr(a,di,ti)}function vn(a,d){var x=a.__data__;return si(d)?x[typeof d=="string"?"string":"hash"]:x.map}function Ot(a,d){var x=rt(a,d);return Gr(x)?x:void 0}function ei(a){var d=Ne.call(a,He),x=a[He];try{a[He]=void 0;var C=!0}catch{}var H=vt.call(a);return C&&(d?a[He]=x:delete a[He]),H}var ti=Tt?function(a){return a==null?[]:(a=Object(a),Me(Tt(a),function(d){return Dt.call(a,d)}))}:ui,bt=zt;(re&&bt(new re(new ArrayBuffer(1)))!=$||Z&&bt(new Z)!=j||Oe&&bt(Oe.resolve())!=E||ue&&bt(new ue)!=O||ie&&bt(new ie)!=K)&&(bt=function(a){var d=zt(a),x=d==N?a.constructor:void 0,C=x?jt(x):"";if(C)switch(C){case ot:return $;case Q:return j;case Le:return E;case Re:return O;case _e:return K}return d});function ni(a,d){return d=d??l,!!d&&(typeof a=="number"||De.test(a))&&a>-1&&a%1==0&&a<d}function si(a){var d=typeof a;return d=="string"||d=="number"||d=="symbol"||d=="boolean"?a!=="__proto__":a===null}function ri(a){return!!Ie&&Ie in a}function ii(a){var d=a&&a.constructor,x=typeof d=="function"&&d.prototype||Te;return a===x}function ai(a){return vt.call(a)}function jt(a){if(a!=null){try{return at.call(a)}catch{}try{return a+""}catch{}}return""}function ks(a,d){return a===d||a!==a&&d!==d}var oi=Ss(function(){return arguments}())?Ss:function(a){return Ht(a)&&Ne.call(a,"callee")&&!Dt.call(a,"callee")},yn=Array.isArray;function li(a){return a!=null&&Is(a.length)&&!Ts(a)}var qn=Ut||fi;function ci(a,d){return Ns(a,d)}function Ts(a){if(!Os(a))return!1;var d=zt(a);return d==y||d==S||d==b||d==k}function Is(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=l}function Os(a){var d=typeof a;return a!=null&&(d=="object"||d=="function")}function Ht(a){return a!=null&&typeof a=="object"}var Rs=m?U(m):qr;function di(a){return li(a)?Wr(a):Jr(a)}function ui(){return[]}function fi(){return!1}e.exports=ci})(Dn,Dn.exports);var Vi=Dn.exports;const $i=hi(Vi);function G(e){const[t,n]=u.useState(void 0);u.useEffect(()=>{n(void 0)},[e]);const r=u.useMemo(()=>!$i(t,e)&&t!==void 0,[t,e]),i=u.useCallback(c=>{c instanceof Function?n(f=>c(f!==void 0?f:e)):n(c)},[e,n]),o=t===void 0?e:t,l=u.useCallback(()=>n(void 0),[n]);return[o,i,l,r]}function Wi(e,t,n,r,i,o,l,c,f,b,h,g,v,y,S,j,w,D,N,E,k,A){const[O,T,I,F]=G(i),[K,_,$,ee]=G(o),[pe,Ge,qe,te]=G(l),[Je,je,Ke,Ze]=G(c),[q,Ce,De,P]=G(e),J=ss(Gn=>Gn.setPreviewTheme),V=u.useCallback(()=>J(e),[J,e]),[W,xe,M,ne]=G(t),[oe,ke,m,Me]=G(n),[Ue,gt,p,U]=G(r),[z,rt,it,Se]=G(f),[Nt,Bt,Ft,Te]=G(b),[ze,at,Ne,Ie]=G(h),[vt,Kt,Et,Qe]=G(D),[yt,Dt,kt,He]=G(g),[Tt,Ut,se,re]=G(v),[Z,Oe,ue,ie]=G(y),[fe,ot,Q,Le]=G(N),[Re,_e,lt,Ve]=G(S),[he,dt,wt,hn]=G(j),[Fn,Kn,et,gn]=G(w),[Un,zn,Hn,bn]=G(E),[ut,Vn,$n,mn]=G(k),[Wn,Xn,It,pn]=G(A);function Yn(){De(),V(),M(),m(),I(),$(),qe(),Ke(),p(),it(),Ft(),Ne(),Et(),kt(),se(),ue(),Q(),lt(),wt(),et(),Hn(),$n(),It()}return{reset:Yn,changed:P||ne||Me||U||ee||F||te||Ze||Se||Te||Ie||Qe||He||re||ie||Le||Ve||hn||gn||bn||mn||pn,theme:{state:q,set:Ce,changed:P},appLanguage:{state:W,set:xe,changed:ne},subtitleStyling:{state:oe,set:ke,changed:Me},deviceName:{state:Ue,set:gt,changed:U},proxyUrls:{state:O,set:T,changed:F},backendUrl:{state:K,set:_,changed:ee},febboxKey:{state:pe,set:Ge,changed:te},realDebridKey:{state:Je,set:je,changed:Ze},profile:{state:z,set:rt,changed:Se},enableThumbnails:{state:Nt,set:Bt,changed:Te},enableAutoplay:{state:ze,set:at,changed:Ie},enableSkipCredits:{state:vt,set:Kt,changed:Qe},enableDiscover:{state:yt,set:Dt,changed:He},enableFeatured:{state:Tt,set:Ut,changed:re},enableDetailsModal:{state:Z,set:Oe,changed:ie},enableImageLogos:{state:fe,set:ot,changed:Le},sourceOrder:{state:Re,set:_e,changed:Ve},enableSourceOrder:{state:he,set:dt,changed:hn},proxyTmdb:{state:Fn,set:Kn,changed:gn},enableCarouselView:{state:Un,set:zn,changed:bn},forceCompactEpisodeView:{state:ut,set:Vn,changed:mn},enableLowPerformanceMode:{state:Wn,set:Xn,changed:pn}}}function Xi(e){return s.jsx("p",{className:"text-type-text",children:e.children})}const Yi=()=>{document.querySelectorAll(".logout-button").forEach(t=>{t.click()})};function Gi(e){const{t}=ae(),n=on(),r=we(l=>{var c;return(c=l.account)==null?void 0:c.token}),[i,o]=us(async()=>{var l;if(!r)throw new Error("No token present");if(!n)throw new Error("No backend set");await pi(n,r,e.id),(l=e.onRemove)==null||l.call(e)},[n,r,e.id]);return s.jsxs(Pt,{className:"flex justify-between items-center",paddingClass:"px-6 py-4",children:[s.jsxs("div",{className:"font-medium",children:[s.jsx(Xi,{children:t("settings.account.devices.deviceNameLabel")}),s.jsx("p",{className:"text-white",children:e.name})]}),e.isCurrent?null:s.jsx(Ee,{theme:"danger",className:"logout-button",loading:i.loading,onClick:o,children:t("settings.account.devices.removeDevice")})]})}function qi(e){const{t}=ae(),n=we(l=>{var c;return(c=l.account)==null?void 0:c.seed}),r=e.sessions,i=we(l=>{var c;return(c=l.account)==null?void 0:c.sessionId}),o=u.useMemo(()=>{if(!n)return[];let l=r.map(c=>{const f=tr(c.device,rs(n));return{current:c.id===i,id:c.id,name:f}});return l=l.sort((c,f)=>c.current?-1:f.current?1:c.name.localeCompare(f.name)),l},[n,r,i]);return n?s.jsxs("div",{children:[s.jsx(En,{border:!0,className:"mt-0 mb-9",children:t("settings.account.devices.title")}),e.error?s.jsx("p",{children:t("settings.account.devices.failed")}):e.loading?s.jsx(mi,{}):s.jsx("div",{className:"space-y-5",children:o.map(l=>s.jsx(Gi,{name:l.name,id:l.id,isCurrent:l.current,onRemove:e.onChange},l.id))})]}):null}function Ji(){const{t:e}=ae(),t=on(),n=we(c=>c.account),{logout:r}=xi(),i=nr("account-delete"),[o,l]=us(async()=>{!n||!t||(await vi(t,n),await r(),i.hide())},[r,n,t,i.hide]);return n?s.jsxs("div",{children:[s.jsx(En,{border:!0,children:e("settings.account.actions.title")}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs(Yt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx(Gt,{children:e("settings.account.actions.migration.title")}),s.jsx("p",{className:"text-type-text mt-3",children:e("settings.account.actions.migration.text")})]}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(Ee,{theme:"purple",onClick:()=>{window.location.href="/migration"},children:e("settings.account.actions.migration.button")})})]}),s.jsxs(Yt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx(Gt,{children:e("settings.account.actions.logoutAllDevices.title")}),s.jsx("p",{className:"text-type-text mt-3",children:e("settings.account.actions.logoutAllDevices.text")})]}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(Ee,{theme:"danger",onClick:Yi,children:e("settings.account.actions.logoutAllDevices.button")})})]}),s.jsxs(Yt,{paddingClass:"px-6 py-8",className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex-grow",children:[s.jsx(Gt,{children:e("settings.account.actions.delete.title")}),s.jsx("p",{className:"text-type-text mt-3",children:e("settings.account.actions.delete.text")})]}),s.jsx("div",{className:"mt-6 flex justify-center",children:s.jsx(Ee,{theme:"danger",loading:o.loading,onClick:i.show,children:e("settings.account.actions.delete.button")})})]})]}),s.jsx(sr,{id:i.id,children:s.jsxs(rr,{children:[s.jsx(En,{className:"!mt-0",children:e("settings.account.actions.delete.confirmTitle")}),s.jsx(yi,{children:e("settings.account.actions.delete.confirmDescription")}),s.jsxs("div",{className:"flex gap-4 mt-4 justify-between",children:[s.jsx(Ee,{theme:"secondary",onClick:i.hide,children:e("onboarding.defaultConfirm.cancel")}),s.jsx(Ee,{theme:"danger",loading:o.loading,onClick:l,children:e("settings.account.actions.delete.confirmButton")})]})]})})]}):null}function Zi(e){const{t}=ae();return s.jsx(sr,{id:e.id,children:s.jsxs(rr,{children:[s.jsxs("div",{className:"flex justify-between items-center mb-9",children:[s.jsx(En,{className:"!mt-0 !mb-0",children:t("settings.account.profile.title")}),s.jsx(ir,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-2xl",sizeClass:"w-12 h-12"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Ps,{label:t("settings.account.profile.firstColor"),value:e.colorA,onInput:e.setColorA}),s.jsx(Ps,{label:t("settings.account.profile.secondColor"),value:e.colorB,onInput:e.setColorB}),s.jsx(wi,{label:t("settings.account.profile.userIcon"),value:e.userIcon,onInput:e.setUserIcon})]}),s.jsx("div",{className:"flex justify-center mt-8",children:s.jsx(Ee,{theme:"purple",className:"!px-20",onClick:e.close,children:t("settings.account.profile.finish")})})]})})}function Qi(e){const{t}=ae(),{logout:n}=ar(),r=nr("profile-edit");return s.jsxs(Pt,{paddingClass:"px-8 py-10",className:"!mt-8",children:[s.jsx(Zi,{id:r.id,close:r.hide,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),s.jsxs("div",{className:"grid lg:grid-cols-[auto,1fr] gap-8",children:[s.jsx("div",{children:s.jsx(ir,{profile:{colorA:e.colorA,colorB:e.colorB,icon:e.userIcon},iconClass:"text-5xl",sizeClass:"w-32 h-32",bottom:s.jsxs("button",{type:"button",className:"tabbable text-xs flex gap-2 items-center bg-editBadge-bg text-editBadge-text hover:bg-editBadge-bgHover py-1 px-3 rounded-full cursor-pointer",onClick:r.show,children:[s.jsx(Fe,{icon:de.EDIT}),t("settings.account.accountDetails.editProfile")]})})}),s.jsx("div",{children:s.jsxs("div",{className:"space-y-8 max-w-xs",children:[s.jsx(ln,{label:t("settings.account.accountDetails.deviceNameLabel")??void 0,placeholder:t("settings.account.accountDetails.deviceNamePlaceholder")??void 0,value:e.deviceName,onChange:i=>e.setDeviceName(i)}),s.jsx("div",{className:"flex space-x-3",children:s.jsx(Ee,{className:"logout-button",theme:"danger",onClick:n,children:t("settings.account.accountDetails.logoutButton")})})]})})]})]})}const ea=[{id:"default",selector:"theme-default",key:"settings.appearance.themes.default"},{id:"classic",selector:"theme-classic",key:"settings.appearance.themes.classic"},{id:"blue",selector:"theme-blue",key:"settings.appearance.themes.blue"},{id:"teal",selector:"theme-teal",key:"settings.appearance.themes.teal"},{id:"red",selector:"theme-red",key:"settings.appearance.themes.red"},{id:"gray",selector:"theme-gray",key:"settings.appearance.themes.gray"},{id:"green",selector:"theme-green",key:"settings.appearance.themes.green"},{id:"forest",selector:"theme-forest",key:"settings.appearance.themes.forest"},{id:"mocha",selector:"theme-mocha",key:"settings.appearance.themes.mocha"},{id:"pink",selector:"theme-pink",key:"settings.appearance.themes.pink"},{id:"noir",selector:"theme-noir",key:"settings.appearance.themes.noir"},{id:"ember",selector:"theme-ember",key:"settings.appearance.themes.ember"},{id:"acid",selector:"theme-acid",key:"settings.appearance.themes.acid"},{id:"spark",selector:"theme-spark",key:"settings.appearance.themes.spark"},{id:"grape",selector:"theme-grape",key:"settings.appearance.themes.grape"},{id:"spiderman",selector:"theme-spiderman",key:"settings.appearance.themes.spiderman"},{id:"wolverine",selector:"theme-wolverine",key:"settings.appearance.themes.wolverine"},{id:"hulk",selector:"theme-hulk",key:"settings.appearance.themes.hulk"},{id:"popsicle",selector:"theme-popsicle",key:"settings.appearance.themes.popsicle"}],ta=function(t){const{t:n}=ae();return s.jsxs("div",{className:ce(t.selector,"cursor-pointer group tabbable"),onClick:t.onClick,children:[s.jsxs("div",{tabIndex:0,onKeyUp:r=>r.key==="Enter"&&r.currentTarget.click(),className:ce("tabbable scroll-mt-32 w-full h-32 relative rounded-lg border bg-gradient-to-br from-themePreview-primary/20 to-themePreview-secondary/10 bg-clip-content transition-colors duration-150",t.active?"border-themePreview-primary":"border-transparent group-hover:border-white/20"),children:[s.jsxs("div",{className:"absolute top-2 left-2",children:[s.jsx("div",{className:"h-5 w-5 bg-themePreview-primary rounded-full"}),s.jsx("div",{className:"h-5 w-5 bg-themePreview-secondary rounded-full -mt-2"})]}),s.jsx(Fe,{icon:de.CHECKMARK,className:ce("absolute top-3 right-3 text-xs text-white transition-opacity duration-150",t.active?"opacity-100":"opacity-0")}),s.jsx("div",{className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 w-3/5 h-4/5 rounded-t-lg -mb-px bg-background-main overflow-hidden",children:s.jsxs("div",{className:"relative w-full h-full",children:[s.jsx("div",{className:"bg-themePreview-primary/50 w-[130%] h-10 absolute left-1/2 -top-5 blur-xl transform -translate-x-1/2 rounded-[100%]"}),s.jsxs("div",{className:"p-2 flex justify-between items-center",children:[s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-4 h-2 rounded-full"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-2 h-2 rounded-full"})]}),s.jsxs("div",{className:"mt-1 flex items-center flex-col gap-1",children:[s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-6 h-0.5 rounded-full"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-16 h-2 mt-1 rounded-full"})]}),s.jsxs("div",{className:"mt-5 px-3",children:[s.jsxs("div",{className:"flex gap-1 items-center",children:[s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-2 h-2 rounded-full"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-20 w-8 h-0.5 rounded-full"})]}),s.jsxs("div",{className:"flex w-full gap-1 mt-1",children:[s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"}),s.jsx("div",{className:"bg-themePreview-ghost bg-opacity-10 w-full h-20 rounded"})]})]})]})})]}),s.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[s.jsx("span",{className:"font-medium text-white",children:t.name}),s.jsx("span",{className:ce("inline-block px-3 py-1 leading-tight text-sm transition-opacity duration-150 rounded-full bg-pill-activeBackground text-white/85",t.inUse?"opacity-100":"opacity-0 pointer-events-none"),children:n("settings.appearance.activeTheme")})]})]})},na=ta,sa=function(t){const{t:n}=ae(),r=u.useRef(null),i=u.useRef(null),[o,l]=u.useState(!0),[c,f]=u.useState(!1),{enableLowPerformanceMode:b,setEnableDiscover:h,setEnableFeatured:g,setEnableDetailsModal:v,setEnableImageLogos:y,setForceCompactEpisodeView:S}=t;u.useEffect(()=>{b&&(h(!1),g(!1),v(!1),y(!1),S(!0))},[b,h,g,v,y,S]);const j=()=>{const w=r.current;w&&(l(w.scrollTop<=0),f(Math.abs(w.scrollHeight-w.scrollTop-w.clientHeight)<2))};return u.useEffect(()=>{const w=r.current;if(w)return w.addEventListener("scroll",j),j(),()=>w.removeEventListener("scroll",j)},[]),u.useEffect(()=>{if(i.current&&r.current){const w=i.current,D=r.current,N=w.getBoundingClientRect(),E=D.getBoundingClientRect();D.scrollTop=N.top+D.scrollTop-E.top-(E.height-N.height)/2,j()}},[t.active]),s.jsxs("div",{className:"space-y-12",children:[s.jsx(cn,{border:!0,children:n("settings.appearance.title")}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.discover")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.discoverDescription")}),s.jsxs("div",{onClick:()=>{if(!t.enableLowPerformanceMode){const w=!t.enableDiscover;t.setEnableDiscover(w),w||t.setEnableFeatured(!1)}},className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",t.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.enableDiscover}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.discoverLabel")})]})]}),t.enableDiscover&&!t.enableLowPerformanceMode&&s.jsxs("div",{className:"pt-4 pl-4 border-l-8 border-dropdown-background",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.featured")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.featuredDescription")}),s.jsxs("div",{onClick:()=>t.setEnableFeatured(!t.enableFeatured),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[s.jsx(me,{enabled:t.enableFeatured}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.featuredLabel")})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.modal")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.modalDescription")}),s.jsxs("div",{onClick:()=>!t.enableLowPerformanceMode&&t.setEnableDetailsModal(!t.enableDetailsModal),className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",t.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.enableDetailsModal}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.modalLabel")})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.logos")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.logosDescription")}),s.jsxs("p",{className:"max-w-[25rem] font-medium pt-2 items-center flex gap-4",children:[s.jsx(Fe,{icon:de.CIRCLE_EXCLAMATION,className:""}),n("settings.appearance.options.logosNotice")]}),s.jsxs("div",{onClick:()=>!t.enableLowPerformanceMode&&t.setEnableImageLogos(!t.enableImageLogos),className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",t.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.enableImageLogos}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.logosLabel")})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.carouselView")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.carouselViewDescription")}),s.jsxs("div",{onClick:()=>t.setEnableCarouselView(!t.enableCarouselView),className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg","cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.enableCarouselView}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.carouselViewLabel")})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.appearance.options.forceCompactEpisodeView")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.appearance.options.forceCompactEpisodeViewDescription")}),s.jsxs("div",{onClick:()=>!t.enableLowPerformanceMode&&t.setForceCompactEpisodeView(!t.forceCompactEpisodeView),className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",t.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.forceCompactEpisodeView}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.appearance.options.forceCompactEpisodeViewLabel")})]})]})]}),s.jsx("div",{className:"space-y-8",children:s.jsx("div",{ref:r,className:ce("grid grid-cols-2 gap-4 max-w-[600px] max-h-[36rem] md:max-h-[64rem] overflow-y-auto","vertical-carousel-container",{"hide-top-gradient":o,"hide-bottom-gradient":c}),children:ea.map(w=>s.jsx("div",{ref:t.active===w.id?i:null,children:s.jsx(na,{selector:w.selector,active:t.active===w.id,inUse:t.inUse===w.id,name:n(w.key),onClick:()=>t.setTheme(w.id)})},w.id))})})]})]})},ra=sa;function Bs(e){const{t}=ae();return s.jsxs("div",{className:ce({"pointer-events-none overflow-hidden w-full rounded":!0,"aspect-video relative":!e.fullscreen,"fixed inset-0 z-[60]":e.fullscreen}),children:[e.fullscreen&&e.show?s.jsx(gi,{children:s.jsx("html",{"data-no-scroll":!0})}):null,s.jsx(lr,{animation:"fade",show:e.show,children:s.jsxs("div",{className:"absolute inset-0 pointer-events-auto",style:{backgroundImage:"radial-gradient(102.95% 87.07% at 100% 100%, #EEAA45 0%, rgba(165, 186, 151, 0.56) 54.69%, rgba(74, 207, 254, 0.00) 100%), linear-gradient(180deg, #48D3FF 0%, #3B27B2 100%)"},children:[s.jsx("button",{type:"button",className:"tabbable bg-black absolute right-3 top-3 text-white bg-opacity-25 duration-100 transition-[background-color,transform] active:scale-110 hover:bg-opacity-50 p-2 rounded-md cursor-pointer",onClick:e.onToggle,children:s.jsx(Fe,{icon:e.fullscreen?de.X:de.EXPAND})}),s.jsx("div",{className:"text-white pointer-events-none absolute flex w-full flex-col items-center transition-[bottom] p-4",style:{bottom:`${e.styling.verticalPosition*4}px`},children:s.jsx("div",{className:e.fullscreen?"":"transform origin-bottom text-[0.5rem]",children:s.jsx(Ni,{text:t("settings.subtitles.previewQuote")??void 0,styling:e.styling,overrideCasing:!1})})})]})})]})}function ia(e){const{t}=ae(),[n,r]=u.useState(!1),i=is(),o=B(),l=ji(h=>h.setCaptionAsTrack),c=o.enableNativeSubtitles;u.useEffect(()=>{i.updateStyling(e.styling)},[e.styling,i,i.updateStyling]),u.useEffect(()=>{l(c)},[c,l]);const f=h=>{e.setStyling(h),i.updateStyling(h)},b=()=>{i.resetStyling(),e.setStyling({color:"#ffffff",backgroundOpacity:.5,size:1,backgroundBlur:.5,bold:!1,verticalPosition:3,fontStyle:"default"})};return s.jsxs("div",{children:[s.jsx(cn,{border:!0,children:t("settings.subtitles.title")}),s.jsxs("div",{className:"grid md:grid-cols-[1fr,356px] gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Vt.FieldTitle,{children:t("player.menus.subtitles.useNativeSubtitles")}),s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(me,{enabled:c,onClick:()=>o.setEnableNativeSubtitles(!c)})})]}),s.jsx("span",{className:"text-xs text-type-secondary",children:t("player.menus.subtitles.useNativeSubtitlesDescription")}),!c&&s.jsxs(s.Fragment,{children:[s.jsx(Jn,{label:t("settings.subtitles.backgroundLabel"),max:100,min:0,onChange:h=>f({...e.styling,backgroundOpacity:h/100}),value:e.styling.backgroundOpacity*100,textTransformer:h=>`${h}%`}),s.jsx(Jn,{label:t("settings.subtitles.backgroundBlurLabel"),max:100,min:0,onChange:h=>f({...e.styling,backgroundBlur:h/100}),value:e.styling.backgroundBlur*100,textTransformer:h=>`${h}%`}),s.jsx(Jn,{label:t("settings.subtitles.textSizeLabel"),max:200,min:1,textTransformer:h=>`${h}%`,onChange:h=>f({...e.styling,size:h/100}),value:e.styling.size*100}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Vt.FieldTitle,{children:t("settings.subtitles.textStyle.title")}),s.jsx("div",{className:"w-30",children:s.jsx(or,{options:[{id:"default",name:t("settings.subtitles.textStyle.default")},{id:"raised",name:t("settings.subtitles.textStyle.raised")},{id:"depressed",name:t("settings.subtitles.textStyle.depressed")},{id:"uniform",name:t("settings.subtitles.textStyle.uniform")},{id:"dropShadow",name:t("settings.subtitles.textStyle.dropShadow")}],selectedItem:{id:e.styling.fontStyle,name:t(`settings.subtitles.textStyle.${e.styling.fontStyle}`)||e.styling.fontStyle},setSelectedItem:h=>f({...e.styling,fontStyle:h.id})})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Vt.FieldTitle,{children:t("settings.subtitles.textBoldLabel")}),s.jsx("div",{className:"flex justify-center items-center",children:s.jsx(me,{enabled:e.styling.bold,onClick:()=>f({...e.styling,bold:!e.styling.bold})})})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Vt.FieldTitle,{children:t("settings.subtitles.colorLabel")}),s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[Ci.map(h=>s.jsx(Si,{onClick:()=>f({...e.styling,color:h}),color:h,active:e.styling.color===h},h)),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"color",value:e.styling.color,onChange:h=>{const g=h.target.value;f({...e.styling,color:g}),i.updateStyling({...e.styling,color:g})},className:"absolute opacity-0 cursor-pointer w-8 h-8"}),s.jsx("div",{style:{color:e.styling.color},children:s.jsx(Fe,{icon:de.BRUSH,className:"text-2xl"})})]})]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx(Vt.FieldTitle,{children:t("settings.subtitles.verticalPositionLabel")}),s.jsxs("div",{className:"flex justify-center items-center space-x-2",children:[s.jsx("button",{type:"button",className:ce("px-3 py-1 rounded transition-colors duration-100",e.styling.verticalPosition===3?"bg-video-context-buttonFocus":"bg-video-context-buttonFocus bg-opacity-0 hover:bg-opacity-50"),onClick:()=>f({...e.styling,verticalPosition:3}),children:t("settings.subtitles.default")}),s.jsx("button",{type:"button",className:ce("px-3 py-1 rounded transition-colors duration-100",e.styling.verticalPosition===1?"bg-video-context-buttonFocus":"bg-video-context-buttonFocus bg-opacity-0 hover:bg-opacity-50"),onClick:()=>f({...e.styling,verticalPosition:1}),children:t("settings.subtitles.low")})]})]}),s.jsx(Ee,{className:"w-full md:w-auto",theme:"secondary",onClick:b,children:t("settings.reset")})]})]}),!c&&s.jsxs(s.Fragment,{children:[s.jsx(Bs,{show:!0,styling:e.styling,onToggle:()=>r(h=>!h)}),s.jsx(Bs,{show:n,fullscreen:!0,styling:e.styling,onToggle:()=>r(h=>!h)})]})]})]})}function aa(e){let{proxyUrls:t,setProxyUrls:n,proxyTmdb:r,setProxyTmdb:i}=e;const{t:o}=ae(),l=u.useCallback(()=>{n(h=>[...h??[],""])},[n]),c=u.useCallback((h,g)=>{n(v=>[...(v??[]).map((y,S)=>S!==h?y:g)])},[n]),f=u.useCallback(h=>{n(g=>[...(g??[]).filter((v,y)=>y!==h)])},[n]),b=u.useCallback(()=>{const h=t===null?[]:null;n(h),h===null&&i(!1)},[t,n,i]);return s.jsxs(Pt,{children:[s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"my-3",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.label")}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:s.jsx(nt,{i18nKey:"settings.connections.workers.description",children:s.jsx(tn,{to:"https://docs.pstream.org/proxy/deploy",children:o("settings.connections.workers.documentation")})})})]}),s.jsx("div",{children:s.jsx(me,{onClick:b,enabled:t!==null})})]}),t!==null?s.jsxs(s.Fragment,{children:[s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.urlLabel")}),s.jsxs("div",{className:"my-6 space-y-2 max-w-md",children:[((t==null?void 0:t.length)??0)===0?s.jsx("p",{children:o("settings.connections.workers.emptyState")}):null,(t??[]).map((h,g)=>s.jsxs("div",{className:"grid grid-cols-[1fr,auto] items-center gap-2",children:[s.jsx(ln,{value:h,onChange:v=>c(g,v),placeholder:o("settings.connections.workers.urlPlaceholder")??void 0}),s.jsx("button",{type:"button",onClick:()=>f(g),className:"h-full scale-90 hover:scale-100 rounded-full aspect-square bg-authentication-inputBg hover:bg-authentication-inputBgHover flex justify-center items-center transition-transform duration-200 hover:text-white cursor-pointer",children:s.jsx(Fe,{className:"text-xl",icon:de.X})})]},g))]}),s.jsx(Ee,{theme:"purple",onClick:l,children:o("settings.connections.workers.addButton")}),s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"my-3",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:o("settings.connections.workers.proxyTMDB.title")}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:o("settings.connections.workers.proxyTMDB.description")})]}),s.jsx("div",{children:s.jsx(me,{enabled:r,onClick:()=>i(!r)})})]})]}):null]})}function oa(e){let{backendUrl:t,setBackendUrl:n}=e;const{t:r}=ae(),i=we();return s.jsxs(Pt,{children:[s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"my-3",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.label")}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:s.jsx(nt,{i18nKey:"settings.connections.server.description",children:s.jsx(tn,{to:"https://docs.pstream.org/backend/deploy",children:r("settings.connections.server.documentation")})})}),i.account&&s.jsxs("div",{children:[s.jsx("br",{}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:s.jsx(nt,{i18nKey:"settings.connections.server.migration.description",children:s.jsx(tn,{to:"/migration",children:r("settings.connections.server.migration.link")})})})]})]}),s.jsx("div",{children:s.jsx(me,{onClick:()=>n(o=>o===null?"":null),enabled:t!==null})})]}),t!==null?s.jsxs(s.Fragment,{children:[s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.server.urlLabel")}),s.jsx(ln,{onChange:n,value:t??"",placeholder:"https://"})]}):null]})}async function la(e){return e?await ki(e):"unset"}function ca(e){let{febboxKey:t,setFebboxKey:n}=e;const{t:r}=ae(),[i,o]=u.useState(!1),l=we(),c=B();u.useEffect(()=>{l.account&&t===null&&c.febboxKey&&n(c.febboxKey)},[l.account,t,c.febboxKey,n]);const[f,b]=u.useState("unset"),h={error:"error",success:"success",unset:"noresult",api_down:"error",invalid_token:"error"};if(u.useEffect(()=>{(async()=>{const v=await la(t);b(v)})()},[t]),hs().ALLOW_FEBBOX_KEY)return s.jsxs(Pt,{children:[s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"my-3",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:r("fedapi.onboarding.title")}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:s.jsx(nt,{i18nKey:"fedapi.onboarding.description"})})]}),s.jsx("div",{children:s.jsx(me,{onClick:()=>n(g=>g===null?"":null),enabled:t!==null})})]}),t!==null?s.jsxs(s.Fragment,{children:[s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsxs("div",{className:"my-3",children:[s.jsxs("p",{className:"max-w-[30rem] font-medium",children:[r("fedapi.setup.title"),s.jsx("br",{}),s.jsxs("div",{onClick:()=>o(!i),className:"flex items-center justify-between p-1 px-2 my-2 w-fit border border-type-secondary rounded-lg cursor-pointer text-type-secondary hover:text-white transition-colors duration-200",children:[s.jsx("span",{className:"text-sm",children:r(i?"fedapi.setup.hideVideo":"fedapi.setup.showVideo")}),i?s.jsx(Fe,{icon:de.CHEVRON_UP,className:"pl-1"}):s.jsx(Fe,{icon:de.CHEVRON_DOWN,className:"pl-1"})]}),i&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"relative pt-[56.25%] mt-2",children:s.jsx("iframe",{src:"https://player.vimeo.com/video/1059834885?h=c3ab398d42&badge=0&autopause=0&player_id=0&app_id=58479",allow:"autoplay; fullscreen; picture-in-picture; clipboard-write; encrypted-media",className:"absolute top-0 left-0 w-full h-full border border-type-secondary rounded-lg bg-black",title:"P-Stream FED API Setup Tutorial"})}),s.jsx("br",{})]}),s.jsx(nt,{i18nKey:"fedapi.setup.step.1",children:s.jsx(tn,{url:"https://febbox.com"})}),s.jsx("br",{}),s.jsx(nt,{i18nKey:"fedapi.setup.step.2"}),s.jsx("br",{}),s.jsx(nt,{i18nKey:"fedapi.setup.step.3"}),s.jsx("br",{}),s.jsx(nt,{i18nKey:"fedapi.setup.step.4"}),s.jsx("br",{}),s.jsx(nt,{i18nKey:"fedapi.setup.step.5"})]}),s.jsx("p",{className:"text-type-danger mt-2",children:s.jsx(nt,{i18nKey:"fedapi.setup.step.warning"})})]}),s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsx("p",{className:"text-white font-bold mb-3",children:r("settings.connections.febbox.tokenLabel","Token")}),s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx(cr,{type:h[f],className:"mx-2 mr-4"}),s.jsx(ln,{onChange:g=>{n(g)},value:t??"",placeholder:"eyABCdE...",passwordToggleable:!0,className:"flex-grow"})]}),f==="error"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("fedapi.status.failure")}),f==="api_down"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("fedapi.status.api_down")}),f==="invalid_token"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("fedapi.status.invalid_token")})]}):null]})}async function da(e){return e?await Di(e):"unset"}function ua(e){let{realDebridKey:t,setRealDebridKey:n}=e;const{t:r}=ae(),i=we(),o=B();u.useEffect(()=>{i.account&&t===null&&o.realDebridKey&&n(o.realDebridKey)},[i.account,t,o.realDebridKey,n]);const[l,c]=u.useState("unset"),f={error:"error",success:"success",unset:"noresult",api_down:"error",invalid_token:"error"};return u.useEffect(()=>{(async()=>{const h=await da(t);c(h)})()},[t]),hs().ALLOW_REAL_DEBRID_KEY?s.jsxs(Pt,{children:[s.jsxs("div",{className:"flex justify-between items-center gap-4",children:[s.jsxs("div",{className:"my-3",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:r("realdebrid.title")}),s.jsx("p",{className:"max-w-[30rem] font-medium",children:r("realdebrid.description")}),s.jsx(tn,{children:s.jsx("a",{href:"https://real-debrid.com/",target:"_blank",rel:"noreferrer",children:"real-debrid.com"})})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsx(me,{onClick:()=>n(b=>b===null?"":null),enabled:t!==null})})]}),t!==null?s.jsxs(s.Fragment,{children:[s.jsx(St,{marginClass:"my-6 px-8 box-content -mx-8"}),s.jsx("p",{className:"text-white font-bold mb-3",children:r("realdebrid.tokenLabel")}),s.jsxs("div",{className:"flex items-center w-full",children:[s.jsx(cr,{type:f[l],className:"mx-2 mr-4"}),s.jsx(ln,{onChange:b=>{n(b)},value:t??"",placeholder:"ABC123...",passwordToggleable:!0,className:"flex-grow"})]}),l==="error"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("realdebrid.status.failure")}),l==="api_down"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("realdebrid.status.api_down")}),l==="invalid_token"&&s.jsx("p",{className:"text-type-danger mt-4",children:r("realdebrid.status.invalid_token")})]}):null]}):null}function fa(e){const{t}=ae();return s.jsxs("div",{children:[s.jsx(cn,{border:!0,children:t("settings.connections.title")}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Ei,{})," ",s.jsx(aa,{proxyUrls:e.proxyUrls,setProxyUrls:e.setProxyUrls,proxyTmdb:e.proxyTmdb,setProxyTmdb:e.setProxyTmdb}),s.jsx(oa,{backendUrl:e.backendUrl,setBackendUrl:e.setBackendUrl}),s.jsx(ua,{realDebridKey:e.realDebridKey,setRealDebridKey:e.setRealDebridKey}),s.jsx(ca,{febboxKey:e.febboxKey,setFebboxKey:e.setFebboxKey})]})]})}function ha(){const e=fs(),{t}=ae();return s.jsx("div",{children:s.jsxs(Yt,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[s.jsxs("div",{children:[s.jsx(Gt,{children:t("settings.account.register.title")}),s.jsx("p",{className:"text-type-text",children:t("settings.account.register.text")})]}),s.jsx("div",{className:"flex justify-end items-center",children:s.jsx(Ee,{theme:"purple",onClick:()=>e("/register"),children:t("settings.account.register.cta")})})]})})}var An={},Pn={},At={};Object.defineProperty(At,"__esModule",{value:!0});At.unlisten=At.listen=void 0;const qt=[],kn=[];function ga(e){return{el:e,callbacks:{},realCallbacks:{},realListenersCnt:0}}function ba(e,t,n){if(e.callbacks[t]){e.callbacks[t].indexOf(n)===-1&&e.callbacks[t].push(n);return}e.callbacks[t]=[n],e.realCallbacks[t]=r=>{for(let i=0,o=e.callbacks[t].length;i<o;i+=1)e.callbacks[t][i](r)},e.el.addEventListener(t,e.realCallbacks[t]),e.realListenersCnt+=1}function ma(e,t,n){if(!e.callbacks[t])return;const r=e.callbacks[t].indexOf(n);r!==-1&&(e.callbacks[t].splice(r,1),!(e.callbacks[t].length>0)&&(e.el.removeEventListener(t,e.realCallbacks[t]),delete e.callbacks[t],delete e.realCallbacks[t],e.realListenersCnt-=1))}function pa(e,t,n){let r=qt.indexOf(e);r===-1&&(r=qt.length,qt.push(e),kn.push(ga(e)));const i=kn[r];ba(i,t,n)}function xa(e,t,n){const r=qt.indexOf(e);if(r===-1)return;const i=kn[r];ma(i,t,n),!(i.realListenersCnt>0)&&(qt.splice(r,1),kn.splice(r,1))}function va(e,t,n){for(let r=0,i=t.length;r<i;r+=1)pa(e,t[r],n)}At.listen=va;function ya(e,t,n){for(let r=0,i=t.length;r<i;r+=1)xa(e,t[r],n)}At.unlisten=ya;var gs={};Object.defineProperty(gs,"__esModule",{value:!0});const Jt={};typeof document<"u"&&(Jt.body=document.body,Jt.window=window,Jt.document=document);const Fs=(()=>{if(typeof document<"u"&&document.body){const e=document.body;return typeof e.matches=="function"?"matches":typeof e.webkitMatchesSelector=="function"?"webkitMatchesSelector":typeof e.mozMatchesSelector=="function"?"mozMatchesSelector":typeof e.msMatchesSelector=="function"?"msMatchesSelector":typeof e.oMatchesSelector=="function"?"oMatchesSelector":null}return null})();function wa(e,t){if(!e)return null;if(Jt.hasOwnProperty(e))return Jt[e];if(e[0]==="#")return document.getElementById(e.slice(1));if(Fs===null)return null;let n=t;for(;n=n.parentElement;)if(n[Fs](e))return n||null;return null}gs.default=wa;var bs={};Object.defineProperty(bs,"__esModule",{value:!0});function ja(e){do{const t=window.getComputedStyle(e);if(t.transform!=="none"||t.webkitTransform!=="none")return e;e=e.parentElement||e.parentNode}while(e!==null&&e.nodeType===1);return null}bs.default=ja;var xt={};Object.defineProperty(xt,"__esModule",{value:!0});xt.isIntersecting=xt.getRect=xt.infiniteRect=void 0;xt.infiniteRect={top:-1/0,bottom:1/0,height:1/0,left:-1/0,right:1/0,width:1/0};function Ca(e){return e&&"getBoundingClientRect"in e&&typeof e.getBoundingClientRect=="function"?e.getBoundingClientRect():e===window||e===document?{top:0,left:0,bottom:window.innerHeight,height:window.innerHeight,width:window.innerWidth,right:window.innerWidth}:{top:0,left:0,right:0,bottom:0,width:0,height:0}}xt.getRect=Ca;function Sa(e,t,n,r){const i=e.top+n,o=e.bottom+r;return i>=t.top&&i<=t.bottom||o>=t.top&&o<=t.bottom||o>=t.bottom&&i<=t.top}xt.isIntersecting=Sa;var fr=Ye&&Ye.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Pn,"__esModule",{value:!0});const Na=u,$t=At,Ks=fr(gs),Ea=fr(bs),Wt=xt,Da=(e,t)=>{const{bottomOffset:n,hideOnBoundaryHit:r}=t,{top:i,height:o,width:l,boundaryBottom:c}=e;return r||i+o+n<c?{top:`${i}px`,width:`${l}px`,position:"fixed"}:!r&&c>0?{top:`${c-o-n}px`,width:`${l}px`,position:"fixed"}:{width:`${l}px`,bottom:`${n}px`,position:"absolute"}},ka=(e,t)=>{const{bottomOffset:n,hideOnBoundaryHit:r}=t,{bottom:i,height:o,width:l,boundaryTop:c}=e;return r||i-o-n>c?{width:`${l}px`,top:`${i-o}px`,position:"fixed"}:{width:`${l}px`,top:`${n}px`,position:"absolute"}},Ta=(e,t,n)=>(e==="top"?Da:ka)(n,t),Ia=(e,t)=>{const n=e.wrapperStyles,r=t.wrapperStyles;if(e.isFixed!==t.isFixed||e.height!==t.height||!n&&r||n&&!r)return!1;if(!r)return!0;for(const i in n)if(n.hasOwnProperty(i)&&n[i]!==r[i])return!1;return!0};class hr extends Na.Component{constructor(){super(...arguments),this.holderEl=null,this.wrapperEl=null,this.el=null,this.scrollEl=null,this.boundaryEl=null,this.disabled=!1,this.checkPositionIntervalId=null,this.lastMinHeight=null,this.state={isFixed:!1,wrapperStyles:void 0,holderStyles:void 0,height:0},this.holderRef=t=>{t!==this.holderEl&&(this.holderEl=t)},this.wrapperRef=t=>{t!==this.wrapperEl&&(this.wrapperEl=t,this.updateScrollEl(),this.updateBoundaryEl())},this.checkPosition=()=>{const{holderEl:t,wrapperEl:n,boundaryEl:r,scrollEl:i,disabled:o}=this;if(!i||!t||!n){console.error("Missing required elements:",{scrollEl:i,holderEl:t,wrapperEl:n});return}const{mode:l,onFixedToggle:c,offsetTransforms:f,isIOSFixEnabled:b,dontUpdateHolderHeightWhenSticky:h}=this.props;if(o){this.state.isFixed&&this.setState({isFixed:!1,wrapperStyles:{}});return}if(!t.getBoundingClientRect||!n.getBoundingClientRect)return;const g=t.getBoundingClientRect(),v=n.getBoundingClientRect(),y=r?(0,Wt.getRect)(r):Wt.infiniteRect,S=(0,Wt.getRect)(i),j=this.isFixed(g,v,y,S);let w=null;if(f&&j&&i instanceof HTMLElement){const k=(0,Ea.default)(i);k&&(w=(0,Wt.getRect)(k))}const D=this.state.isFixed&&h&&this.lastMinHeight?this.lastMinHeight:v.height;this.lastMinHeight=D;const N=b?{transform:"translateZ(0)",WebkitTransform:"translateZ(0)"}:void 0,E={isFixed:j,height:v.height,holderStyles:{minHeight:`${D}px`},wrapperStyles:j?Object.assign(Object.assign({},N),Ta(l,this.props,{boundaryTop:l==="bottom"?y.top:0,boundaryBottom:l==="top"?y.bottom:0,top:l==="top"?S.top-(w?w.top:0):0,bottom:l==="bottom"?S.bottom-(w?w.bottom:0):0,width:g.width,height:v.height})):N};j!==this.state.isFixed&&c&&typeof c=="function"&&c(j),Ia(this.state,E)||this.setState(E)}}isFixed(t,n,r,i){const{hideOnBoundaryHit:o,bottomOffset:l,topOffset:c,mode:f}=this.props;if(this.disabled||o&&r&&!(0,Wt.isIntersecting)(r,i,c,l))return!1;const b=o?n.height+l:0;return f==="top"?t.top+c<i.top&&i.top+b<=r.bottom:t.bottom-c>i.bottom&&i.bottom-b>=r.top}updateScrollEl(){if(!this.wrapperEl)return;this.scrollEl&&((0,$t.unlisten)(this.scrollEl,["scroll"],this.checkPosition),this.scrollEl=null);const{scrollElement:t}=this.props;typeof t=="string"?this.scrollEl=(0,Ks.default)(t,this.wrapperEl):this.scrollEl=t,this.scrollEl?(0,$t.listen)(this.scrollEl,["scroll"],this.checkPosition):console.error("Cannot find scrollElement "+(typeof t=="string"?t:"unknown"))}updateBoundaryEl(){if(!this.wrapperEl)return;const{boundaryElement:t}=this.props;this.boundaryEl=(0,Ks.default)(t,this.wrapperEl),(this.boundaryEl===window||this.boundaryEl===document)&&(this.boundaryEl=null)}initialize(){const{positionRecheckInterval:t,disabled:n}=this.props;this.disabled=n,(0,$t.listen)(window,["scroll","resize","pageshow","load"],this.checkPosition),this.checkPosition(),t&&(this.checkPositionIntervalId=setInterval(this.checkPosition,t))}componentDidUpdate({scrollElement:t,boundaryElement:n,disabled:r}){(t!==this.props.scrollElement||this.scrollEl===null)&&this.updateScrollEl(),(n!==this.props.boundaryElement||this.boundaryEl===null)&&this.updateBoundaryEl(),r!==this.props.disabled&&(this.disabled=this.props.disabled,this.checkPosition())}componentDidMount(){this.initialize(),this.wrapperEl===null&&console.error("Wrapper element is missing, please make sure that you have assigned refs correctly")}componentWillUnmount(){this.scrollEl&&(0,$t.unlisten)(this.scrollEl,["scroll"],this.checkPosition),(0,$t.unlisten)(window,["scroll","resize","pageshow","load"],this.checkPosition),this.boundaryEl=null,this.scrollEl=null,this.checkPositionIntervalId&&clearInterval(this.checkPositionIntervalId)}render(){const{holderRef:t,wrapperRef:n}=this,{isFixed:r,wrapperStyles:i,holderStyles:o}=this.state;return this.props.children({holderRef:t,wrapperRef:n,isFixed:r,wrapperStyles:i,holderStyles:o})}}hr.defaultProps={mode:"top",topOffset:0,bottomOffset:0,isIOSFixEnabled:!0,offsetTransforms:!0,disabled:!1,onFixedToggle:void 0,boundaryElement:void 0,hideOnBoundaryHit:!0,scrollElement:"window",dontUpdateHolderHeightWhenSticky:!1};Pn.default=hr;var gr={};(function(e){var t=Ye&&Ye.__rest||function(l,c){var f={};for(var b in l)Object.prototype.hasOwnProperty.call(l,b)&&c.indexOf(b)<0&&(f[b]=l[b]);if(l!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,b=Object.getOwnPropertySymbols(l);h<b.length;h++)c.indexOf(b[h])<0&&Object.prototype.propertyIsEnumerable.call(l,b[h])&&(f[b[h]]=l[b[h]]);return f},n=Ye&&Ye.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultProps=void 0;const r=n(u),i=n(Pn);e.defaultProps=Object.assign(Object.assign({},i.default.defaultProps),{stickyClassName:"sticky",wrapperClassName:"",stickyStyle:{}});function o(l){const c=Object.assign(Object.assign({},e.defaultProps),l),{mode:f,onFixedToggle:b,hideOnBoundaryHit:h,offsetTransforms:g,disabled:v,boundaryElement:y,scrollElement:S,bottomOffset:j,topOffset:w,positionRecheckInterval:D,children:N,isIOSFixEnabled:E,dontUpdateHolderHeightWhenSticky:k,wrapperClassName:A,stickyClassName:O,stickyStyle:T}=c,I=t(c,["mode","onFixedToggle","hideOnBoundaryHit","offsetTransforms","disabled","boundaryElement","scrollElement","bottomOffset","topOffset","positionRecheckInterval","children","isIOSFixEnabled","dontUpdateHolderHeightWhenSticky","wrapperClassName","stickyClassName","stickyStyle"]);return r.default.createElement(i.default,{mode:f,onFixedToggle:b,hideOnBoundaryHit:h,offsetTransforms:g,disabled:v,boundaryElement:y,scrollElement:S,bottomOffset:j,topOffset:w,positionRecheckInterval:D,isIOSFixEnabled:E,dontUpdateHolderHeightWhenSticky:k},({isFixed:F,wrapperStyles:K,wrapperRef:_,holderStyles:$,holderRef:ee})=>r.default.createElement("div",Object.assign({},I,{ref:ee,style:$}),r.default.createElement("div",Object.assign({},I,{className:`${A} ${F?O:""}`,style:F?Object.assign(Object.assign({},K),T):K,ref:_}),N)))}e.default=o})(gr);var br=Ye&&Ye.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(An,"__esModule",{value:!0});An.RenderPropSticky=void 0;const Oa=br(Pn);An.RenderPropSticky=Oa.default;const Ra=br(gr);var Aa=An.default=Ra.default;function Us(e){return s.jsxs("section",{className:e.className??"",children:[s.jsx("p",{className:"text-sm font-bold uppercase text-settings-sidebar-type-secondary mb-2",children:e.title}),e.children]})}function Pa(e){return s.jsxs("button",{type:"button",onClick:e.onClick,className:ce("tabbable w-full px-3 py-2 flex items-center space-x-3 cursor-pointer rounded my-2",e.active?"bg-settings-sidebar-activeLink text-settings-sidebar-type-activated":null),children:[s.jsx(Fe,{className:ce("text-2xl text-settings-sidebar-type-icon",e.active?"text-settings-sidebar-type-iconActivated":null),icon:e.icon}),s.jsx("span",{children:e.children})]})}const Ma=16;function La(e){const{t}=ae(),n=e.url?e.url.startsWith("https://"):!1;return s.jsxs("div",{className:"flex items-center gap-1 -mx-1 ml-3 px-1 rounded bg-largeCard-background font-bold",children:[s.jsx(Fe,{icon:n?de.LOCK:de.UNLOCK}),t(n?"settings.sidebar.info.secure":"settings.sidebar.info.insecure")]})}function _a(){var h;const{t:e}=ae(),{isMobile:t}=dr(),{account:n}=we(),r=location.hostname,[i,o]=u.useState(""),l=[{textKey:"settings.account.title",id:"settings-account",icon:de.USER},{textKey:"settings.preferences.title",id:"settings-preferences",icon:de.SETTINGS},{textKey:"settings.appearance.title",id:"settings-appearance",icon:de.BRUSH},{textKey:"settings.subtitles.title",id:"settings-captions",icon:de.CAPTIONS},{textKey:"settings.connections.title",id:"settings-connection",icon:de.LINK}],c=on(),f=bi(async()=>{if(c)return Ti(c)},[c]);u.useEffect(()=>{function g(){var j;const y=(window.innerHeight||document.documentElement.clientHeight)/4,S=l.map(w=>{const D=document.getElementById(w.id);if(!D)return{distance:1/0,link:w.id};const N=D.getBoundingClientRect(),E=Math.abs(y-N.top),k=Math.abs(y-N.bottom);return{distance:Math.min(k,E),link:w.id}}).sort((w,D)=>w.distance-D.distance);window.innerHeight+window.scrollY>=document.body.offsetHeight?o(l[l.length-1].id):o(((j=S[0])==null?void 0:j.link)??"")}return document.addEventListener("scroll",g),g(),()=>{document.removeEventListener("scroll",g)}});const b=u.useCallback(g=>{const v=document.getElementById(g);if(!v)return null;const y=v.getBoundingClientRect().top+window.scrollY;window.scrollTo({top:y-120,behavior:"smooth"})},[]);return s.jsx("div",{className:"text-settings-sidebar-type-inactive sidebar-boundary",children:s.jsxs(Aa,{topOffset:-6*Ma,stickyClassName:"pt-[6rem]",disabled:t,hideOnBoundaryHit:!1,boundaryElement:".sidebar-boundary",children:[s.jsxs("div",{className:"hidden lg:block",children:[s.jsx(Us,{title:e("global.pages.settings"),children:l.map(g=>s.jsx(Pa,{icon:g.icon,active:g.id===i,onClick:()=>b(g.id),children:e(g.textKey)},g.id))}),s.jsx(St,{})]}),s.jsx(Us,{className:"text-sm",title:e("settings.sidebar.info.title"),children:s.jsxs("div",{className:"px-3 py-3.5 rounded-lg bg-largeCard-background bg-opacity-50 grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.hostname")}),s.jsx("p",{className:"text-white",children:r})]}),s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsxs("div",{className:"text-type-dimmed font-medium flex items-center",children:[s.jsx("p",{children:e("settings.sidebar.info.backendUrl")}),s.jsx(La,{url:c})]}),s.jsx("p",{className:"text-white",children:(c==null?void 0:c.replace(/https?:\/\//,""))??""})]}),s.jsxs("div",{className:"col-span-2 space-y-1",children:[s.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.userId")}),s.jsx("p",{className:"text-white",children:(n==null?void 0:n.userId)??e("settings.sidebar.info.notLoggedIn")})]}),s.jsxs("div",{className:"col-span-1 space-y-1",children:[s.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.appVersion")}),s.jsx("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-block",children:hs().APP_VERSION})]}),s.jsxs("div",{className:"col-span-1 space-y-1",children:[s.jsx("p",{className:"text-type-dimmed font-medium",children:e("settings.sidebar.info.backendVersion")}),s.jsxs("p",{className:"text-type-dimmed px-2 py-1 rounded bg-settings-sidebar-badge inline-flex items-center gap-1",children:[f.error?s.jsx(Fe,{icon:de.WARNING,className:"text-type-danger text-base"}):null,f.loading?s.jsx("span",{className:"block h-4 w-12 bg-type-dimmed/20 rounded"}):((h=f==null?void 0:f.value)==null?void 0:h.version)||e("settings.sidebar.info.unknownVersion")]})]})]})})]})})}function Ba(){const{t:e}=ae(),t=fs();return s.jsx("div",{children:s.jsxs(Yt,{paddingClass:"px-6 py-12",className:"grid grid-cols-2 gap-12 mt-5",children:[s.jsxs("div",{children:[s.jsx(Gt,{children:e("settings.account.admin.title")}),s.jsx("p",{className:"text-type-text",children:e("settings.account.admin.text")})]}),s.jsx("div",{className:"flex justify-end items-center",children:s.jsx(Ee,{theme:"purple",onClick:()=>t("/admin"),children:e("settings.account.admin.button")})})]})})}function Fa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>r=>{t.forEach(i=>i(r))},t)}const Mn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mt(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function ms(e){return"nodeType"in e}function Pe(e){var t,n;return e?Mt(e)?e:ms(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function ps(e){const{Document:t}=Pe(e);return e instanceof t}function dn(e){return Mt(e)?!1:e instanceof Pe(e).HTMLElement}function mr(e){return e instanceof Pe(e).SVGElement}function Lt(e){return e?Mt(e)?e.document:ms(e)?ps(e)?e:dn(e)||mr(e)?e.ownerDocument:document:document:document}const ct=Mn?u.useLayoutEffect:u.useEffect;function xs(e){const t=u.useRef(e);return ct(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}function Ka(){const e=u.useRef(null),t=u.useCallback((r,i)=>{e.current=setInterval(r,i)},[]),n=u.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function nn(e,t){t===void 0&&(t=[e]);const n=u.useRef(e);return ct(()=>{n.current!==e&&(n.current=e)},t),n}function un(e,t){const n=u.useRef();return u.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function Tn(e){const t=xs(e),n=u.useRef(null),r=u.useCallback(i=>{i!==n.current&&(t==null||t(i,n.current)),n.current=i},[]);return[n,r]}function as(e){const t=u.useRef();return u.useEffect(()=>{t.current=e},[e]),t.current}let Zn={};function fn(e,t){return u.useMemo(()=>{if(t)return t;const n=Zn[e]==null?0:Zn[e]+1;return Zn[e]=n,e+"-"+n},[e,t])}function pr(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.reduce((o,l)=>{const c=Object.entries(l);for(const[f,b]of c){const h=o[f];h!=null&&(o[f]=h+e*b)}return o},{...t})}}const Rt=pr(1),sn=pr(-1);function Ua(e){return"clientX"in e&&"clientY"in e}function vs(e){if(!e)return!1;const{KeyboardEvent:t}=Pe(e.target);return t&&e instanceof t}function za(e){if(!e)return!1;const{TouchEvent:t}=Pe(e.target);return t&&e instanceof t}function os(e){if(za(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Ua(e)?{x:e.clientX,y:e.clientY}:null}const rn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[rn.Translate.toString(e),rn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),zs="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ha(e){return e.matches(zs)?e:e.querySelector(zs)}const Va={display:"none"};function $a(e){let{id:t,value:n}=e;return Ae.createElement("div",{id:t,style:Va},n)}function Wa(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const i={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ae.createElement("div",{id:t,style:i,role:"status","aria-live":r,"aria-atomic":!0},n)}function Xa(){const[e,t]=u.useState("");return{announce:u.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const xr=u.createContext(null);function Ya(e){const t=u.useContext(xr);u.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function Ga(){const[e]=u.useState(()=>new Set),t=u.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[u.useCallback(r=>{let{type:i,event:o}=r;e.forEach(l=>{var c;return(c=l[i])==null?void 0:c.call(l,o)})},[e]),t]}const qa={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Ja={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function Za(e){let{announcements:t=Ja,container:n,hiddenTextDescribedById:r,screenReaderInstructions:i=qa}=e;const{announce:o,announcement:l}=Xa(),c=fn("DndLiveRegion"),[f,b]=u.useState(!1);if(u.useEffect(()=>{b(!0)},[]),Ya(u.useMemo(()=>({onDragStart(g){let{active:v}=g;o(t.onDragStart({active:v}))},onDragMove(g){let{active:v,over:y}=g;t.onDragMove&&o(t.onDragMove({active:v,over:y}))},onDragOver(g){let{active:v,over:y}=g;o(t.onDragOver({active:v,over:y}))},onDragEnd(g){let{active:v,over:y}=g;o(t.onDragEnd({active:v,over:y}))},onDragCancel(g){let{active:v,over:y}=g;o(t.onDragCancel({active:v,over:y}))}}),[o,t])),!f)return null;const h=Ae.createElement(Ae.Fragment,null,Ae.createElement($a,{id:r,value:i.draggable}),Ae.createElement(Wa,{id:c,announcement:l}));return n?Xt.createPortal(h,n):h}var le;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(le||(le={}));function In(){}function Qn(e,t){return u.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function Qa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return u.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const st=Object.freeze({x:0,y:0});function vr(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function yr(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function eo(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function Hs(e){let{left:t,top:n,height:r,width:i}=e;return[{x:t,y:n},{x:t+i,y:n},{x:t,y:n+r},{x:t+i,y:n+r}]}function wr(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function Vs(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const to=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Vs(t,t.left,t.top),o=[];for(const l of r){const{id:c}=l,f=n.get(c);if(f){const b=vr(Vs(f),i);o.push({id:c,data:{droppableContainer:l,value:b}})}}return o.sort(yr)},no=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=Hs(t),o=[];for(const l of r){const{id:c}=l,f=n.get(c);if(f){const b=Hs(f),h=i.reduce((v,y,S)=>v+vr(b[S],y),0),g=Number((h/4).toFixed(4));o.push({id:c,data:{droppableContainer:l,value:g}})}}return o.sort(yr)};function so(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),i=Math.min(t.left+t.width,e.left+e.width),o=Math.min(t.top+t.height,e.top+e.height),l=i-r,c=o-n;if(r<i&&n<o){const f=t.width*t.height,b=e.width*e.height,h=l*c,g=h/(f+b-h);return Number(g.toFixed(4))}return 0}const ro=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const i=[];for(const o of r){const{id:l}=o,c=n.get(l);if(c){const f=so(c,t);f>0&&i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(eo)};function io(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function jr(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:st}function ao(e){return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return i.reduce((l,c)=>({...l,top:l.top+e*c.y,bottom:l.bottom+e*c.y,left:l.left+e*c.x,right:l.right+e*c.x}),{...n})}}const oo=ao(1);function lo(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function co(e,t,n){const r=lo(t);if(!r)return e;const{scaleX:i,scaleY:o,x:l,y:c}=r,f=e.left-l-(1-i)*parseFloat(n),b=e.top-c-(1-o)*parseFloat(n.slice(n.indexOf(" ")+1)),h=i?e.width/i:e.width,g=o?e.height/o:e.height;return{width:h,height:g,top:b,right:f+h,bottom:b+g,left:f}}const uo={ignoreTransform:!1};function _t(e,t){t===void 0&&(t=uo);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:b,transformOrigin:h}=Pe(e).getComputedStyle(e);b&&(n=co(n,b,h))}const{top:r,left:i,width:o,height:l,bottom:c,right:f}=n;return{top:r,left:i,width:o,height:l,bottom:c,right:f}}function $s(e){return _t(e,{ignoreTransform:!0})}function fo(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ho(e,t){return t===void 0&&(t=Pe(e).getComputedStyle(e)),t.position==="fixed"}function go(e,t){t===void 0&&(t=Pe(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(i=>{const o=t[i];return typeof o=="string"?n.test(o):!1})}function Ln(e,t){const n=[];function r(i){if(t!=null&&n.length>=t||!i)return n;if(ps(i)&&i.scrollingElement!=null&&!n.includes(i.scrollingElement))return n.push(i.scrollingElement),n;if(!dn(i)||mr(i)||n.includes(i))return n;const o=Pe(e).getComputedStyle(i);return i!==e&&go(i,o)&&n.push(i),ho(i,o)?n:r(i.parentNode)}return e?r(e):n}function Cr(e){const[t]=Ln(e,1);return t??null}function es(e){return!Mn||!e?null:Mt(e)?e:ms(e)?ps(e)||e===Lt(e).scrollingElement?window:dn(e)?e:null:null}function Sr(e){return Mt(e)?e.scrollX:e.scrollLeft}function Nr(e){return Mt(e)?e.scrollY:e.scrollTop}function ls(e){return{x:Sr(e),y:Nr(e)}}var be;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(be||(be={}));function Er(e){return!Mn||!e?!1:e===document.scrollingElement}function Dr(e){const t={x:0,y:0},n=Er(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},i=e.scrollTop<=t.y,o=e.scrollLeft<=t.x,l=e.scrollTop>=r.y,c=e.scrollLeft>=r.x;return{isTop:i,isLeft:o,isBottom:l,isRight:c,maxScroll:r,minScroll:t}}const bo={x:.2,y:.2};function mo(e,t,n,r,i){let{top:o,left:l,right:c,bottom:f}=n;r===void 0&&(r=10),i===void 0&&(i=bo);const{isTop:b,isBottom:h,isLeft:g,isRight:v}=Dr(e),y={x:0,y:0},S={x:0,y:0},j={height:t.height*i.y,width:t.width*i.x};return!b&&o<=t.top+j.height?(y.y=be.Backward,S.y=r*Math.abs((t.top+j.height-o)/j.height)):!h&&f>=t.bottom-j.height&&(y.y=be.Forward,S.y=r*Math.abs((t.bottom-j.height-f)/j.height)),!v&&c>=t.right-j.width?(y.x=be.Forward,S.x=r*Math.abs((t.right-j.width-c)/j.width)):!g&&l<=t.left+j.width&&(y.x=be.Backward,S.x=r*Math.abs((t.left+j.width-l)/j.width)),{direction:y,speed:S}}function po(e){if(e===document.scrollingElement){const{innerWidth:o,innerHeight:l}=window;return{top:0,left:0,right:o,bottom:l,width:o,height:l}}const{top:t,left:n,right:r,bottom:i}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:i,width:e.clientWidth,height:e.clientHeight}}function kr(e){return e.reduce((t,n)=>Rt(t,ls(n)),st)}function xo(e){return e.reduce((t,n)=>t+Sr(n),0)}function vo(e){return e.reduce((t,n)=>t+Nr(n),0)}function yo(e,t){if(t===void 0&&(t=_t),!e)return;const{top:n,left:r,bottom:i,right:o}=t(e);Cr(e)&&(i<=0||o<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const wo=[["x",["left","right"],xo],["y",["top","bottom"],vo]];class ys{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Ln(n),i=kr(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[o,l,c]of wo)for(const f of l)Object.defineProperty(this,f,{get:()=>{const b=c(r),h=i[o]-b;return this.rect[f]+h},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zt{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var i;(i=this.target)==null||i.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function jo(e){const{EventTarget:t}=Pe(e);return e instanceof t?e:Lt(e)}function ts(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var Xe;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Xe||(Xe={}));function Ws(e){e.preventDefault()}function Co(e){e.stopPropagation()}var L;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(L||(L={}));const Tr={start:[L.Space,L.Enter],cancel:[L.Esc],end:[L.Space,L.Enter,L.Tab]},So=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case L.Right:return{...n,x:n.x+25};case L.Left:return{...n,x:n.x-25};case L.Down:return{...n,y:n.y+25};case L.Up:return{...n,y:n.y-25}}};class ws{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Zt(Lt(n)),this.windowListeners=new Zt(Pe(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Xe.Resize,this.handleCancel),this.windowListeners.add(Xe.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Xe.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&yo(r),n(st)}handleKeyDown(t){if(vs(t)){const{active:n,context:r,options:i}=this.props,{keyboardCodes:o=Tr,coordinateGetter:l=So,scrollBehavior:c="smooth"}=i,{code:f}=t;if(o.end.includes(f)){this.handleEnd(t);return}if(o.cancel.includes(f)){this.handleCancel(t);return}const{collisionRect:b}=r.current,h=b?{x:b.left,y:b.top}:st;this.referenceCoordinates||(this.referenceCoordinates=h);const g=l(t,{active:n,context:r.current,currentCoordinates:h});if(g){const v=sn(g,h),y={x:0,y:0},{scrollableAncestors:S}=r.current;for(const j of S){const w=t.code,{isTop:D,isRight:N,isLeft:E,isBottom:k,maxScroll:A,minScroll:O}=Dr(j),T=po(j),I={x:Math.min(w===L.Right?T.right-T.width/2:T.right,Math.max(w===L.Right?T.left:T.left+T.width/2,g.x)),y:Math.min(w===L.Down?T.bottom-T.height/2:T.bottom,Math.max(w===L.Down?T.top:T.top+T.height/2,g.y))},F=w===L.Right&&!N||w===L.Left&&!E,K=w===L.Down&&!k||w===L.Up&&!D;if(F&&I.x!==g.x){const _=j.scrollLeft+v.x,$=w===L.Right&&_<=A.x||w===L.Left&&_>=O.x;if($&&!v.y){j.scrollTo({left:_,behavior:c});return}$?y.x=j.scrollLeft-_:y.x=w===L.Right?j.scrollLeft-A.x:j.scrollLeft-O.x,y.x&&j.scrollBy({left:-y.x,behavior:c});break}else if(K&&I.y!==g.y){const _=j.scrollTop+v.y,$=w===L.Down&&_<=A.y||w===L.Up&&_>=O.y;if($&&!v.x){j.scrollTo({top:_,behavior:c});return}$?y.y=j.scrollTop-_:y.y=w===L.Down?j.scrollTop-A.y:j.scrollTop-O.y,y.y&&j.scrollBy({top:-y.y,behavior:c});break}}this.handleMove(t,Rt(sn(g,this.referenceCoordinates),y))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}ws.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=Tr,onActivation:i}=t,{active:o}=n;const{code:l}=e.nativeEvent;if(r.start.includes(l)){const c=o.activatorNode.current;return c&&e.target!==c?!1:(e.preventDefault(),i==null||i({event:e.nativeEvent}),!0)}return!1}}];function Xs(e){return!!(e&&"distance"in e)}function Ys(e){return!!(e&&"delay"in e)}class js{constructor(t,n,r){var i;r===void 0&&(r=jo(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:o}=t,{target:l}=o;this.props=t,this.events=n,this.document=Lt(l),this.documentListeners=new Zt(this.document),this.listeners=new Zt(r),this.windowListeners=new Zt(Pe(l)),this.initialCoordinates=(i=os(o))!=null?i:st,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Xe.Resize,this.handleCancel),this.windowListeners.add(Xe.DragStart,Ws),this.windowListeners.add(Xe.VisibilityChange,this.handleCancel),this.windowListeners.add(Xe.ContextMenu,Ws),this.documentListeners.add(Xe.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Ys(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(Xs(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:i}=this.props;i(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Xe.Click,Co,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Xe.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:i,props:o}=this,{onMove:l,options:{activationConstraint:c}}=o;if(!i)return;const f=(n=os(t))!=null?n:st,b=sn(i,f);if(!r&&c){if(Xs(c)){if(c.tolerance!=null&&ts(b,c.tolerance))return this.handleCancel();if(ts(b,c.distance))return this.handleStart()}if(Ys(c)&&ts(b,c.tolerance))return this.handleCancel();this.handlePending(c,b);return}t.cancelable&&t.preventDefault(),l(f)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===L.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const No={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class Ir extends js{constructor(t){const{event:n}=t,r=Lt(n.target);super(t,No,r)}}Ir.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r==null||r({event:n}),!0)}}];const Eo={move:{name:"mousemove"},end:{name:"mouseup"}};var cs;(function(e){e[e.RightClick=2]="RightClick"})(cs||(cs={}));class Or extends js{constructor(t){super(t,Eo,Lt(t.event.target))}}Or.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===cs.RightClick?!1:(r==null||r({event:n}),!0)}}];const ns={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rr extends js{constructor(t){super(t,ns)}static setup(){return window.addEventListener(ns.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(ns.move.name,t)};function t(){}}}Rr.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:i}=n;return i.length>1?!1:(r==null||r({event:n}),!0)}}];var Qt;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Qt||(Qt={}));var On;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(On||(On={}));function Do(e){let{acceleration:t,activator:n=Qt.Pointer,canScroll:r,draggingRect:i,enabled:o,interval:l=5,order:c=On.TreeOrder,pointerCoordinates:f,scrollableAncestors:b,scrollableAncestorRects:h,delta:g,threshold:v}=e;const y=To({delta:g,disabled:!o}),[S,j]=Ka(),w=u.useRef({x:0,y:0}),D=u.useRef({x:0,y:0}),N=u.useMemo(()=>{switch(n){case Qt.Pointer:return f?{top:f.y,bottom:f.y,left:f.x,right:f.x}:null;case Qt.DraggableRect:return i}},[n,i,f]),E=u.useRef(null),k=u.useCallback(()=>{const O=E.current;if(!O)return;const T=w.current.x*D.current.x,I=w.current.y*D.current.y;O.scrollBy(T,I)},[]),A=u.useMemo(()=>c===On.TreeOrder?[...b].reverse():b,[c,b]);u.useEffect(()=>{if(!o||!b.length||!N){j();return}for(const O of A){if((r==null?void 0:r(O))===!1)continue;const T=b.indexOf(O),I=h[T];if(!I)continue;const{direction:F,speed:K}=mo(O,I,N,t,v);for(const _ of["x","y"])y[_][F[_]]||(K[_]=0,F[_]=0);if(K.x>0||K.y>0){j(),E.current=O,S(k,l),w.current=K,D.current=F;return}}w.current={x:0,y:0},D.current={x:0,y:0},j()},[t,k,r,j,o,l,JSON.stringify(N),JSON.stringify(y),S,b,A,h,JSON.stringify(v)])}const ko={x:{[be.Backward]:!1,[be.Forward]:!1},y:{[be.Backward]:!1,[be.Forward]:!1}};function To(e){let{delta:t,disabled:n}=e;const r=as(t);return un(i=>{if(n||!r||!i)return ko;const o={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[be.Backward]:i.x[be.Backward]||o.x===-1,[be.Forward]:i.x[be.Forward]||o.x===1},y:{[be.Backward]:i.y[be.Backward]||o.y===-1,[be.Forward]:i.y[be.Forward]||o.y===1}}},[n,t,r])}function Io(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return un(i=>{var o;return t==null?null:(o=r??i)!=null?o:null},[r,t])}function Oo(e,t){return u.useMemo(()=>e.reduce((n,r)=>{const{sensor:i}=r,o=i.activators.map(l=>({eventName:l.eventName,handler:t(l.handler,r)}));return[...n,...o]},[]),[e,t])}var an;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(an||(an={}));var ds;(function(e){e.Optimized="optimized"})(ds||(ds={}));const Gs=new Map;function Ro(e,t){let{dragging:n,dependencies:r,config:i}=t;const[o,l]=u.useState(null),{frequency:c,measure:f,strategy:b}=i,h=u.useRef(e),g=w(),v=nn(g),y=u.useCallback(function(D){D===void 0&&(D=[]),!v.current&&l(N=>N===null?D:N.concat(D.filter(E=>!N.includes(E))))},[v]),S=u.useRef(null),j=un(D=>{if(g&&!n)return Gs;if(!D||D===Gs||h.current!==e||o!=null){const N=new Map;for(let E of e){if(!E)continue;if(o&&o.length>0&&!o.includes(E.id)&&E.rect.current){N.set(E.id,E.rect.current);continue}const k=E.node.current,A=k?new ys(f(k),k):null;E.rect.current=A,A&&N.set(E.id,A)}return N}return D},[e,o,n,g,f]);return u.useEffect(()=>{h.current=e},[e]),u.useEffect(()=>{g||y()},[n,g]),u.useEffect(()=>{o&&o.length>0&&l(null)},[JSON.stringify(o)]),u.useEffect(()=>{g||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{y(),S.current=null},c))},[c,g,y,...r]),{droppableRects:j,measureDroppableContainers:y,measuringScheduled:o!=null};function w(){switch(b){case an.Always:return!1;case an.BeforeDragging:return n;default:return!n}}}function Ar(e,t){return un(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Ao(e,t){return Ar(e,t)}function Po(e){let{callback:t,disabled:n}=e;const r=xs(t),i=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:o}=window;return new o(r)},[r,n]);return u.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function _n(e){let{callback:t,disabled:n}=e;const r=xs(t),i=u.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:o}=window;return new o(r)},[n]);return u.useEffect(()=>()=>i==null?void 0:i.disconnect(),[i]),i}function Mo(e){return new ys(_t(e),e)}function qs(e,t,n){t===void 0&&(t=Mo);const[r,i]=u.useState(null);function o(){i(f=>{if(!e)return null;if(e.isConnected===!1){var b;return(b=f??n)!=null?b:null}const h=t(e);return JSON.stringify(f)===JSON.stringify(h)?f:h})}const l=Po({callback(f){if(e)for(const b of f){const{type:h,target:g}=b;if(h==="childList"&&g instanceof HTMLElement&&g.contains(e)){o();break}}}}),c=_n({callback:o});return ct(()=>{o(),e?(c==null||c.observe(e),l==null||l.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),l==null||l.disconnect())},[e]),r}function Lo(e){const t=Ar(e);return jr(e,t)}const Js=[];function _o(e){const t=u.useRef(e),n=un(r=>e?r&&r!==Js&&e&&t.current&&e.parentNode===t.current.parentNode?r:Ln(e):Js,[e]);return u.useEffect(()=>{t.current=e},[e]),n}function Bo(e){const[t,n]=u.useState(null),r=u.useRef(e),i=u.useCallback(o=>{const l=es(o.target);l&&n(c=>c?(c.set(l,ls(l)),new Map(c)):null)},[]);return u.useEffect(()=>{const o=r.current;if(e!==o){l(o);const c=e.map(f=>{const b=es(f);return b?(b.addEventListener("scroll",i,{passive:!0}),[b,ls(b)]):null}).filter(f=>f!=null);n(c.length?new Map(c):null),r.current=e}return()=>{l(e),l(o)};function l(c){c.forEach(f=>{const b=es(f);b==null||b.removeEventListener("scroll",i)})}},[i,e]),u.useMemo(()=>e.length?t?Array.from(t.values()).reduce((o,l)=>Rt(o,l),st):kr(e):st,[e,t])}function Zs(e,t){t===void 0&&(t=[]);const n=u.useRef(null);return u.useEffect(()=>{n.current=null},t),u.useEffect(()=>{const r=e!==st;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?sn(e,n.current):st}function Fo(e){u.useEffect(()=>{if(!Mn)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function Ko(e,t){return u.useMemo(()=>e.reduce((n,r)=>{let{eventName:i,handler:o}=r;return n[i]=l=>{o(l,t)},n},{}),[e,t])}function Pr(e){return u.useMemo(()=>e?fo(e):null,[e])}const Qs=[];function Uo(e,t){t===void 0&&(t=_t);const[n]=e,r=Pr(n?Pe(n):null),[i,o]=u.useState(Qs);function l(){o(()=>e.length?e.map(f=>Er(f)?r:new ys(t(f),f)):Qs)}const c=_n({callback:l});return ct(()=>{c==null||c.disconnect(),l(),e.forEach(f=>c==null?void 0:c.observe(f))},[e]),i}function zo(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return dn(t)?t:e}function Ho(e){let{measure:t}=e;const[n,r]=u.useState(null),i=u.useCallback(b=>{for(const{target:h}of b)if(dn(h)){r(g=>{const v=t(h);return g?{...g,width:v.width,height:v.height}:v});break}},[t]),o=_n({callback:i}),l=u.useCallback(b=>{const h=zo(b);o==null||o.disconnect(),h&&(o==null||o.observe(h)),r(h?t(h):null)},[t,o]),[c,f]=Tn(l);return u.useMemo(()=>({nodeRef:c,rect:n,setRef:f}),[n,c,f])}const Vo=[{sensor:Ir,options:{}},{sensor:ws,options:{}}],$o={current:{}},Nn={draggable:{measure:$s},droppable:{measure:$s,strategy:an.WhileDragging,frequency:ds.Optimized},dragOverlay:{measure:_t}};class en extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Wo={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new en,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:In},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Nn,measureDroppableContainers:In,windowRect:null,measuringScheduled:!1},Xo={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:In,draggableNodes:new Map,over:null,measureDroppableContainers:In},Bn=u.createContext(Xo),Mr=u.createContext(Wo);function Yo(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new en}}}function Go(e,t){switch(t.type){case le.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case le.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case le.DragEnd:case le.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case le.RegisterDroppable:{const{element:n}=t,{id:r}=n,i=new en(e.droppable.containers);return i.set(r,n),{...e,droppable:{...e.droppable,containers:i}}}case le.SetDroppableDisabled:{const{id:n,key:r,disabled:i}=t,o=e.droppable.containers.get(n);if(!o||r!==o.key)return e;const l=new en(e.droppable.containers);return l.set(n,{...o,disabled:i}),{...e,droppable:{...e.droppable,containers:l}}}case le.UnregisterDroppable:{const{id:n,key:r}=t,i=e.droppable.containers.get(n);if(!i||r!==i.key)return e;const o=new en(e.droppable.containers);return o.delete(n),{...e,droppable:{...e.droppable,containers:o}}}default:return e}}function qo(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:i}=u.useContext(Bn),o=as(r),l=as(n==null?void 0:n.id);return u.useEffect(()=>{if(!t&&!r&&o&&l!=null){if(!vs(o)||document.activeElement===o.target)return;const c=i.get(l);if(!c)return;const{activatorNode:f,node:b}=c;if(!f.current&&!b.current)return;requestAnimationFrame(()=>{for(const h of[f.current,b.current]){if(!h)continue;const g=Ha(h);if(g){g.focus();break}}})}},[r,t,i,l,o]),null}function Jo(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((i,o)=>o({transform:i,...r}),n):n}function Zo(e){return u.useMemo(()=>({draggable:{...Nn.draggable,...e==null?void 0:e.draggable},droppable:{...Nn.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Nn.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function Qo(e){let{activeNode:t,measure:n,initialRect:r,config:i=!0}=e;const o=u.useRef(!1),{x:l,y:c}=typeof i=="boolean"?{x:i,y:i}:i;ct(()=>{if(!l&&!c||!t){o.current=!1;return}if(o.current||!r)return;const b=t==null?void 0:t.node.current;if(!b||b.isConnected===!1)return;const h=n(b),g=jr(h,r);if(l||(g.x=0),c||(g.y=0),o.current=!0,Math.abs(g.x)>0||Math.abs(g.y)>0){const v=Cr(b);v&&v.scrollBy({top:g.y,left:g.x})}},[t,l,c,r,n])}const Lr=u.createContext({...st,scaleX:1,scaleY:1});var pt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(pt||(pt={}));const el=u.memo(function(t){var n,r,i,o;let{id:l,accessibility:c,autoScroll:f=!0,children:b,sensors:h=Vo,collisionDetection:g=ro,measuring:v,modifiers:y,...S}=t;const j=u.useReducer(Go,void 0,Yo),[w,D]=j,[N,E]=Ga(),[k,A]=u.useState(pt.Uninitialized),O=k===pt.Initialized,{draggable:{active:T,nodes:I,translate:F},droppable:{containers:K}}=w,_=T!=null?I.get(T):null,$=u.useRef({initial:null,translated:null}),ee=u.useMemo(()=>{var se;return T!=null?{id:T,data:(se=_==null?void 0:_.data)!=null?se:$o,rect:$}:null},[T,_]),pe=u.useRef(null),[Ge,qe]=u.useState(null),[te,Je]=u.useState(null),je=nn(S,Object.values(S)),Ke=fn("DndDescribedBy",l),Ze=u.useMemo(()=>K.getEnabled(),[K]),q=Zo(v),{droppableRects:Ce,measureDroppableContainers:De,measuringScheduled:P}=Ro(Ze,{dragging:O,dependencies:[F.x,F.y],config:q.droppable}),J=Io(I,T),V=u.useMemo(()=>te?os(te):null,[te]),W=Ut(),xe=Ao(J,q.draggable.measure);Qo({activeNode:T!=null?I.get(T):null,config:W.layoutShiftCompensation,initialRect:xe,measure:q.draggable.measure});const M=qs(J,q.draggable.measure,xe),ne=qs(J?J.parentElement:null),oe=u.useRef({activatorEvent:null,active:null,activeNode:J,collisionRect:null,collisions:null,droppableRects:Ce,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ke=K.getNodeFor((n=oe.current.over)==null?void 0:n.id),m=Ho({measure:q.dragOverlay.measure}),Me=(r=m.nodeRef.current)!=null?r:J,Ue=O?(i=m.rect)!=null?i:M:null,gt=!!(m.nodeRef.current&&m.rect),p=Lo(gt?null:M),U=Pr(Me?Pe(Me):null),z=_o(O?ke??J:null),rt=Uo(z),it=Jo(y,{transform:{x:F.x-p.x,y:F.y-p.y,scaleX:1,scaleY:1},activatorEvent:te,active:ee,activeNodeRect:M,containerNodeRect:ne,draggingNodeRect:Ue,over:oe.current.over,overlayNodeRect:m.rect,scrollableAncestors:z,scrollableAncestorRects:rt,windowRect:U}),Se=V?Rt(V,F):null,Nt=Bo(z),Bt=Zs(Nt),Ft=Zs(Nt,[M]),Te=Rt(it,Bt),ze=Ue?oo(Ue,it):null,at=ee&&ze?g({active:ee,collisionRect:ze,droppableRects:Ce,droppableContainers:Ze,pointerCoordinates:Se}):null,Ne=wr(at,"id"),[Ie,vt]=u.useState(null),Kt=gt?it:Rt(it,Ft),Et=io(Kt,(o=Ie==null?void 0:Ie.rect)!=null?o:null,M),Qe=u.useRef(null),yt=u.useCallback((se,re)=>{let{sensor:Z,options:Oe}=re;if(pe.current==null)return;const ue=I.get(pe.current);if(!ue)return;const ie=se.nativeEvent,fe=new Z({active:pe.current,activeNode:ue,event:ie,options:Oe,context:oe,onAbort(Q){if(!I.get(Q))return;const{onDragAbort:Re}=je.current,_e={id:Q};Re==null||Re(_e),N({type:"onDragAbort",event:_e})},onPending(Q,Le,Re,_e){if(!I.get(Q))return;const{onDragPending:Ve}=je.current,he={id:Q,constraint:Le,initialCoordinates:Re,offset:_e};Ve==null||Ve(he),N({type:"onDragPending",event:he})},onStart(Q){const Le=pe.current;if(Le==null)return;const Re=I.get(Le);if(!Re)return;const{onDragStart:_e}=je.current,lt={activatorEvent:ie,active:{id:Le,data:Re.data,rect:$}};Xt.unstable_batchedUpdates(()=>{_e==null||_e(lt),A(pt.Initializing),D({type:le.DragStart,initialCoordinates:Q,active:Le}),N({type:"onDragStart",event:lt}),qe(Qe.current),Je(ie)})},onMove(Q){D({type:le.DragMove,coordinates:Q})},onEnd:ot(le.DragEnd),onCancel:ot(le.DragCancel)});Qe.current=fe;function ot(Q){return async function(){const{active:Re,collisions:_e,over:lt,scrollAdjustedTranslate:Ve}=oe.current;let he=null;if(Re&&Ve){const{cancelDrop:dt}=je.current;he={activatorEvent:ie,active:Re,collisions:_e,delta:Ve,over:lt},Q===le.DragEnd&&typeof dt=="function"&&await Promise.resolve(dt(he))&&(Q=le.DragCancel)}pe.current=null,Xt.unstable_batchedUpdates(()=>{D({type:Q}),A(pt.Uninitialized),vt(null),qe(null),Je(null),Qe.current=null;const dt=Q===le.DragEnd?"onDragEnd":"onDragCancel";if(he){const wt=je.current[dt];wt==null||wt(he),N({type:dt,event:he})}})}}},[I]),Dt=u.useCallback((se,re)=>(Z,Oe)=>{const ue=Z.nativeEvent,ie=I.get(Oe);if(pe.current!==null||!ie||ue.dndKit||ue.defaultPrevented)return;const fe={active:ie};se(Z,re.options,fe)===!0&&(ue.dndKit={capturedBy:re.sensor},pe.current=Oe,yt(Z,re))},[I,yt]),kt=Oo(h,Dt);Fo(h),ct(()=>{M&&k===pt.Initializing&&A(pt.Initialized)},[M,k]),u.useEffect(()=>{const{onDragMove:se}=je.current,{active:re,activatorEvent:Z,collisions:Oe,over:ue}=oe.current;if(!re||!Z)return;const ie={active:re,activatorEvent:Z,collisions:Oe,delta:{x:Te.x,y:Te.y},over:ue};Xt.unstable_batchedUpdates(()=>{se==null||se(ie),N({type:"onDragMove",event:ie})})},[Te.x,Te.y]),u.useEffect(()=>{const{active:se,activatorEvent:re,collisions:Z,droppableContainers:Oe,scrollAdjustedTranslate:ue}=oe.current;if(!se||pe.current==null||!re||!ue)return;const{onDragOver:ie}=je.current,fe=Oe.get(Ne),ot=fe&&fe.rect.current?{id:fe.id,rect:fe.rect.current,data:fe.data,disabled:fe.disabled}:null,Q={active:se,activatorEvent:re,collisions:Z,delta:{x:ue.x,y:ue.y},over:ot};Xt.unstable_batchedUpdates(()=>{vt(ot),ie==null||ie(Q),N({type:"onDragOver",event:Q})})},[Ne]),ct(()=>{oe.current={activatorEvent:te,active:ee,activeNode:J,collisionRect:ze,collisions:at,droppableRects:Ce,draggableNodes:I,draggingNode:Me,draggingNodeRect:Ue,droppableContainers:K,over:Ie,scrollableAncestors:z,scrollAdjustedTranslate:Te},$.current={initial:Ue,translated:ze}},[ee,J,at,ze,I,Me,Ue,Ce,K,Ie,z,Te]),Do({...W,delta:F,draggingRect:ze,pointerCoordinates:Se,scrollableAncestors:z,scrollableAncestorRects:rt});const He=u.useMemo(()=>({active:ee,activeNode:J,activeNodeRect:M,activatorEvent:te,collisions:at,containerNodeRect:ne,dragOverlay:m,draggableNodes:I,droppableContainers:K,droppableRects:Ce,over:Ie,measureDroppableContainers:De,scrollableAncestors:z,scrollableAncestorRects:rt,measuringConfiguration:q,measuringScheduled:P,windowRect:U}),[ee,J,M,te,at,ne,m,I,K,Ce,Ie,De,z,rt,q,P,U]),Tt=u.useMemo(()=>({activatorEvent:te,activators:kt,active:ee,activeNodeRect:M,ariaDescribedById:{draggable:Ke},dispatch:D,draggableNodes:I,over:Ie,measureDroppableContainers:De}),[te,kt,ee,M,D,Ke,I,Ie,De]);return Ae.createElement(xr.Provider,{value:E},Ae.createElement(Bn.Provider,{value:Tt},Ae.createElement(Mr.Provider,{value:He},Ae.createElement(Lr.Provider,{value:Et},b)),Ae.createElement(qo,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Ae.createElement(Za,{...c,hiddenTextDescribedById:Ke}));function Ut(){const se=(Ge==null?void 0:Ge.autoScrollEnabled)===!1,re=typeof f=="object"?f.enabled===!1:f===!1,Z=O&&!se&&!re;return typeof f=="object"?{...f,enabled:Z}:{enabled:Z}}}),tl=u.createContext(null),er="button",nl="Draggable";function sl(e){let{id:t,data:n,disabled:r=!1,attributes:i}=e;const o=fn(nl),{activators:l,activatorEvent:c,active:f,activeNodeRect:b,ariaDescribedById:h,draggableNodes:g,over:v}=u.useContext(Bn),{role:y=er,roleDescription:S="draggable",tabIndex:j=0}=i??{},w=(f==null?void 0:f.id)===t,D=u.useContext(w?Lr:tl),[N,E]=Tn(),[k,A]=Tn(),O=Ko(l,t),T=nn(n);ct(()=>(g.set(t,{id:t,key:o,node:N,activatorNode:k,data:T}),()=>{const F=g.get(t);F&&F.key===o&&g.delete(t)}),[g,t]);const I=u.useMemo(()=>({role:y,tabIndex:j,"aria-disabled":r,"aria-pressed":w&&y===er?!0:void 0,"aria-roledescription":S,"aria-describedby":h.draggable}),[r,y,j,w,S,h.draggable]);return{active:f,activatorEvent:c,activeNodeRect:b,attributes:I,isDragging:w,listeners:r?void 0:O,node:N,over:v,setNodeRef:E,setActivatorNodeRef:A,transform:D}}function rl(){return u.useContext(Mr)}const il="Droppable",al={timeout:25};function ol(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:i}=e;const o=fn(il),{active:l,dispatch:c,over:f,measureDroppableContainers:b}=u.useContext(Bn),h=u.useRef({disabled:n}),g=u.useRef(!1),v=u.useRef(null),y=u.useRef(null),{disabled:S,updateMeasurementsFor:j,timeout:w}={...al,...i},D=nn(j??r),N=u.useCallback(()=>{if(!g.current){g.current=!0;return}y.current!=null&&clearTimeout(y.current),y.current=setTimeout(()=>{b(Array.isArray(D.current)?D.current:[D.current]),y.current=null},w)},[w]),E=_n({callback:N,disabled:S||!l}),k=u.useCallback((I,F)=>{E&&(F&&(E.unobserve(F),g.current=!1),I&&E.observe(I))},[E]),[A,O]=Tn(k),T=nn(t);return u.useEffect(()=>{!E||!A.current||(E.disconnect(),g.current=!1,E.observe(A.current))},[A,E]),u.useEffect(()=>(c({type:le.RegisterDroppable,element:{id:r,key:o,disabled:n,node:A,rect:v,data:T}}),()=>c({type:le.UnregisterDroppable,key:o,id:r})),[r]),u.useEffect(()=>{n!==h.current.disabled&&(c({type:le.SetDroppableDisabled,id:r,key:o,disabled:n}),h.current.disabled=n)},[r,o,n,c]),{active:l,rect:v,isOver:(f==null?void 0:f.id)===r,node:A,over:f,setNodeRef:O}}function ll(e,t,n){const r={...e};return t.top+e.y<=n.top?r.y=n.top-t.top:t.bottom+e.y>=n.top+n.height&&(r.y=n.top+n.height-t.bottom),t.left+e.x<=n.left?r.x=n.left-t.left:t.right+e.x>=n.left+n.width&&(r.x=n.left+n.width-t.right),r}const cl=e=>{let{containerNodeRect:t,draggingNodeRect:n,transform:r}=e;return!n||!t?r:ll(r,n,t)},dl=e=>{let{transform:t}=e;return{...t,x:0}};function Cs(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function ul(e,t){return e.reduce((n,r,i)=>{const o=t.get(r);return o&&(n[i]=o),n},Array(e.length))}function Cn(e){return e!==null&&e>=0}function fl(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function hl(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const _r=e=>{let{rects:t,activeIndex:n,overIndex:r,index:i}=e;const o=Cs(t,r,n),l=t[i],c=o[i];return!c||!l?null:{x:c.left-l.left,y:c.top-l.top,scaleX:c.width/l.width,scaleY:c.height/l.height}},Sn={scaleX:1,scaleY:1},gl=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:i,rects:o,overIndex:l}=e;const c=(t=o[n])!=null?t:r;if(!c)return null;if(i===n){const b=o[l];return b?{x:0,y:n<l?b.top+b.height-(c.top+c.height):b.top-c.top,...Sn}:null}const f=bl(o,i,n);return i>n&&i<=l?{x:0,y:-c.height-f,...Sn}:i<n&&i>=l?{x:0,y:c.height+f,...Sn}:{x:0,y:0,...Sn}};function bl(e,t,n){const r=e[t],i=e[t-1],o=e[t+1];return r?n<t?i?r.top-(i.top+i.height):o?o.top-(r.top+r.height):0:o?o.top-(r.top+r.height):i?r.top-(i.top+i.height):0:0}const Br="Sortable",Fr=Ae.createContext({activeIndex:-1,containerId:Br,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:_r,disabled:{draggable:!1,droppable:!1}});function ml(e){let{children:t,id:n,items:r,strategy:i=_r,disabled:o=!1}=e;const{active:l,dragOverlay:c,droppableRects:f,over:b,measureDroppableContainers:h}=rl(),g=fn(Br,n),v=c.rect!==null,y=u.useMemo(()=>r.map(O=>typeof O=="object"&&"id"in O?O.id:O),[r]),S=l!=null,j=l?y.indexOf(l.id):-1,w=b?y.indexOf(b.id):-1,D=u.useRef(y),N=!fl(y,D.current),E=w!==-1&&j===-1||N,k=hl(o);ct(()=>{N&&S&&h(y)},[N,y,S,h]),u.useEffect(()=>{D.current=y},[y]);const A=u.useMemo(()=>({activeIndex:j,containerId:g,disabled:k,disableTransforms:E,items:y,overIndex:w,useDragOverlay:v,sortedRects:ul(y,f),strategy:i}),[j,g,k.draggable,k.droppable,E,y,w,f,v,i]);return Ae.createElement(Fr.Provider,{value:A},t)}const pl=e=>{let{id:t,items:n,activeIndex:r,overIndex:i}=e;return Cs(n,r,i).indexOf(t)},xl=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:i,items:o,newIndex:l,previousItems:c,previousContainerId:f,transition:b}=e;return!b||!r||c!==o&&i===l?!1:n?!0:l!==i&&t===f},vl={duration:200,easing:"ease"},Kr="transform",yl=rn.Transition.toString({property:Kr,duration:0,easing:"linear"}),wl={roleDescription:"sortable"};function jl(e){let{disabled:t,index:n,node:r,rect:i}=e;const[o,l]=u.useState(null),c=u.useRef(n);return ct(()=>{if(!t&&n!==c.current&&r.current){const f=i.current;if(f){const b=_t(r.current,{ignoreTransform:!0}),h={x:f.left-b.left,y:f.top-b.top,scaleX:f.width/b.width,scaleY:f.height/b.height};(h.x||h.y)&&l(h)}}n!==c.current&&(c.current=n)},[t,n,r,i]),u.useEffect(()=>{o&&l(null)},[o]),o}function Cl(e){let{animateLayoutChanges:t=xl,attributes:n,disabled:r,data:i,getNewIndex:o=pl,id:l,strategy:c,resizeObserverConfig:f,transition:b=vl}=e;const{items:h,containerId:g,activeIndex:v,disabled:y,disableTransforms:S,sortedRects:j,overIndex:w,useDragOverlay:D,strategy:N}=u.useContext(Fr),E=Sl(r,y),k=h.indexOf(l),A=u.useMemo(()=>({sortable:{containerId:g,index:k,items:h},...i}),[g,i,k,h]),O=u.useMemo(()=>h.slice(h.indexOf(l)),[h,l]),{rect:T,node:I,isOver:F,setNodeRef:K}=ol({id:l,data:A,disabled:E.droppable,resizeObserverConfig:{updateMeasurementsFor:O,...f}}),{active:_,activatorEvent:$,activeNodeRect:ee,attributes:pe,setNodeRef:Ge,listeners:qe,isDragging:te,over:Je,setActivatorNodeRef:je,transform:Ke}=sl({id:l,data:A,attributes:{...wl,...n},disabled:E.draggable}),Ze=Fa(K,Ge),q=!!_,Ce=q&&!S&&Cn(v)&&Cn(w),De=!D&&te,P=De&&Ce?Ke:null,V=Ce?P??(c??N)({rects:j,activeNodeRect:ee,activeIndex:v,overIndex:w,index:k}):null,W=Cn(v)&&Cn(w)?o({id:l,items:h,activeIndex:v,overIndex:w}):k,xe=_==null?void 0:_.id,M=u.useRef({activeId:xe,items:h,newIndex:W,containerId:g}),ne=h!==M.current.items,oe=t({active:_,containerId:g,isDragging:te,isSorting:q,id:l,index:k,items:h,newIndex:M.current.newIndex,previousItems:M.current.items,previousContainerId:M.current.containerId,transition:b,wasDragging:M.current.activeId!=null}),ke=jl({disabled:!oe,index:k,node:I,rect:T});return u.useEffect(()=>{q&&M.current.newIndex!==W&&(M.current.newIndex=W),g!==M.current.containerId&&(M.current.containerId=g),h!==M.current.items&&(M.current.items=h)},[q,W,g,h]),u.useEffect(()=>{if(xe===M.current.activeId)return;if(xe&&!M.current.activeId){M.current.activeId=xe;return}const Me=setTimeout(()=>{M.current.activeId=xe},50);return()=>clearTimeout(Me)},[xe]),{active:_,activeIndex:v,attributes:pe,data:A,rect:T,index:k,newIndex:W,items:h,isOver:F,isSorting:q,isDragging:te,listeners:qe,node:I,overIndex:w,over:Je,setNodeRef:Ze,setActivatorNodeRef:je,setDroppableNodeRef:K,setDraggableNodeRef:Ge,transform:ke??V,transition:m()};function m(){if(ke||ne&&M.current.newIndex===k)return yl;if(!(De&&!vs($)||!b)&&(q||oe))return rn.Transition.toString({...b,property:Kr})}}function Sl(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(r=e==null?void 0:e.droppable)!=null?r:t.droppable}}function Rn(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const Nl=[L.Down,L.Right,L.Up,L.Left],El=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:i,droppableContainers:o,over:l,scrollableAncestors:c}}=t;if(Nl.includes(e.code)){if(e.preventDefault(),!n||!r)return;const f=[];o.getEnabled().forEach(g=>{if(!g||g!=null&&g.disabled)return;const v=i.get(g.id);if(v)switch(e.code){case L.Down:r.top<v.top&&f.push(g);break;case L.Up:r.top>v.top&&f.push(g);break;case L.Left:r.left>v.left&&f.push(g);break;case L.Right:r.left<v.left&&f.push(g);break}});const b=no({collisionRect:r,droppableRects:i,droppableContainers:f});let h=wr(b,"id");if(h===(l==null?void 0:l.id)&&b.length>1&&(h=b[1].id),h!=null){const g=o.get(n.id),v=o.get(h),y=v?i.get(v.id):null,S=v==null?void 0:v.node.current;if(S&&y&&g&&v){const w=Ln(S).some((O,T)=>c[T]!==O),D=Ur(g,v),N=Dl(g,v),E=w||!D?{x:0,y:0}:{x:N?r.width-y.width:0,y:N?r.height-y.height:0},k={x:y.left,y:y.top};return E.x&&E.y?k:sn(k,E)}}}};function Ur(e,t){return!Rn(e)||!Rn(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function Dl(e,t){return!Rn(e)||!Rn(t)||!Ur(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}function kl(e){const{attributes:t,listeners:n,setNodeRef:r,transform:i,transition:o}=Cl({id:e.item.id}),l={transform:rn.Transform.toString(i),transition:o};return s.jsxs("div",{ref:r,style:l,...t,...n,className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg touch-manipulation",e.item.disabled&&"opacity-50",i?"cursor-grabbing":"cursor-grab"),children:[s.jsx("span",{className:"flex-1 text-white font-bold",children:e.item.name}),e.item.disabled&&s.jsx(Fe,{icon:de.UNPLUG}),s.jsx(Fe,{icon:de.MENU})]})}function Tl(e){const t=Qa(Qn(Rr,{activationConstraint:{delay:75,tolerance:1}}),Qn(Or),Qn(ws,{coordinateGetter:El})),n=r=>{const{active:i,over:o}=r;if(o&&i.id!==o.id){const l=e.items,c=l.findIndex(h=>h.id===i.id),f=l.findIndex(h=>h.id===o.id),b=Cs(l,c,f);e.setItems(b)}};return s.jsx(el,{sensors:t,collisionDetection:to,onDragEnd:n,modifiers:[dl,cl],children:s.jsx(ml,{items:e.items,strategy:gl,children:s.jsx("div",{className:"flex flex-col gap-2",children:e.items.map(r=>s.jsx(kl,{item:r},r.id))})})})}const Il=function(t){const{t:n}=ae(),r=Ii(Ms.map(g=>g.code)),i=Oi(),o=Ms.sort((g,v)=>r.indexOf(g.code)-r.indexOf(v.code)).map(g=>({id:g.code,name:`${g.name}${g.nativeName?`  ${g.nativeName}`:""}`,leftIcon:s.jsx(Ri,{langCode:g.code})})),l=o.find(g=>{var v;return g.id===((v=Ai(t.language))==null?void 0:v.code)}),c=ur().listSources(),f=u.useMemo(()=>{const g=Pi().listSources();return t.sourceOrder.map(v=>{var y;return{id:v,name:((y=c.find(S=>S.id===v))==null?void 0:y.name)||v,disabled:!g.find(S=>S.id===v)}})},[t.sourceOrder,c]),b=fs(),h=()=>{const g=!t.enableLowPerformanceMode;t.setEnableLowPerformanceMode(g),g&&(t.setEnableThumbnails(!1),t.setEnableAutoplay(!1))};return s.jsxs("div",{className:"space-y-12",children:[s.jsx(cn,{border:!0,children:n("settings.preferences.title")}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.preferences.language")}),s.jsx("p",{className:"max-w-[20rem] font-medium",children:n("settings.preferences.languageDescription")}),s.jsx(or,{className:"w-full",options:o,selectedItem:l||o[0],setSelectedItem:g=>t.setLanguage(g.id)})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.preferences.thumbnail")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.preferences.thumbnailDescription")}),s.jsxs("div",{onClick:()=>{t.enableLowPerformanceMode||t.setEnableThumbnails(!t.enableThumbnails)},className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",t.enableLowPerformanceMode?"cursor-not-allowed opacity-50 pointer-events-none":"cursor-pointer opacity-100 pointer-events-auto"),children:[s.jsx(me,{enabled:t.enableThumbnails}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.preferences.thumbnailLabel")})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.preferences.autoplay")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.preferences.autoplayDescription")}),s.jsxs("div",{onClick:()=>i&&!t.enableLowPerformanceMode?t.setEnableAutoplay(!t.enableAutoplay):null,className:ce("bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",i&&!t.enableLowPerformanceMode?"cursor-pointer opacity-100 pointer-events-auto":"cursor-not-allowed opacity-50 pointer-events-none"),children:[s.jsx(me,{enabled:t.enableAutoplay&&i}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.preferences.autoplayLabel")})]}),t.enableAutoplay&&i&&!t.enableLowPerformanceMode&&s.jsxs("div",{className:"pt-4 pl-4 border-l-8 border-dropdown-background",children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.preferences.skipCredits")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.preferences.skipCreditsDescription")}),s.jsxs("div",{onClick:()=>t.setEnableSkipCredits(!t.enableSkipCredits),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[s.jsx(me,{enabled:t.enableSkipCredits}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.preferences.skipCreditsLabel")})]})]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-white font-bold mb-3",children:n("settings.preferences.lowPerformanceMode")}),s.jsx("p",{className:"max-w-[25rem] font-medium",children:n("settings.preferences.lowPerformanceModeDescription")}),s.jsxs("div",{onClick:h,className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[s.jsx(me,{enabled:t.enableLowPerformanceMode}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.preferences.lowPerformanceModeLabel")})]})]})]}),s.jsx("div",{id:"source-order",className:"space-y-8",children:s.jsxs("div",{className:"flex flex-col gap-3",children:[s.jsx("p",{className:"text-white font-bold",children:n("settings.preferences.sourceOrder")}),s.jsxs("div",{className:"max-w-[25rem] font-medium",children:[s.jsx(nt,{i18nKey:"settings.preferences.sourceOrderDescription",components:{bold:s.jsx("span",{className:"text-type-link font-bold cursor-pointer",onClick:()=>b("/onboarding/extension")})}}),s.jsxs("div",{onClick:()=>t.setenableSourceOrder(!t.enableSourceOrder),className:"bg-dropdown-background hover:bg-dropdown-hoverBackground select-none my-4 cursor-pointer space-x-3 flex items-center max-w-[25rem] py-3 px-4 rounded-lg",children:[s.jsx(me,{enabled:t.enableSourceOrder}),s.jsx("p",{className:"flex-1 text-white font-bold",children:n("settings.preferences.sourceOrderEnableLabel")})]})]}),t.enableSourceOrder&&s.jsxs("div",{className:"w-full flex flex-col gap-4",children:[s.jsx(Tl,{items:f,setItems:g=>t.setSourceOrder(g.map(v=>v.id))}),s.jsx(Ee,{className:"max-w-[25rem]",theme:"secondary",onClick:()=>t.setSourceOrder(c.map(g=>g.id)),children:n("settings.reset")})]})]})})]})]})},Ol=Il;function Rl(e){const{isMobile:t}=dr();return s.jsx(Hi,{ultraWide:!0,classNames:"overflow-visible",children:s.jsxs("div",{className:ce("grid gap-12",t?"grid-cols-1":"lg:grid-cols-[280px,1fr]"),children:[s.jsx(_a,{}),s.jsx("div",{children:e.children})]})})}function Al(e){const t=on(),{account:n}=e,[r,i]=us(()=>t?Mi(t,n):Promise.resolve([]),[n,t]);return u.useEffect(()=>{i()},[i]),s.jsxs(s.Fragment,{children:[s.jsx(Qi,{deviceName:e.deviceName,setDeviceName:e.setDeviceName,colorA:e.colorA,setColorA:e.setColorA,colorB:e.colorB,setColorB:e.setColorB,userIcon:e.userIcon,setUserIcon:e.setUserIcon}),s.jsx(qi,{error:!!r.error,loading:r.loading,sessions:r.value??[],onChange:i}),s.jsx(Ji,{})]})}function Ll(){u.useEffect(()=>{const p=window.location.hash;if(p){const U=document.querySelector(p);U&&U.scrollIntoView({behavior:"smooth"})}},[]);const{t:e}=ae(),t=Ls(p=>p.theme),n=Ls(p=>p.setTheme),r=ss(p=>p.previewTheme),i=ss(p=>p.setPreviewTheme),o=_s(p=>p.language),l=_s(p=>p.setLanguage),c=is(p=>p.styling),f=is(p=>p.updateStyling),b=we(p=>p.proxySet),h=we(p=>p.setProxySet),g=we(p=>p.backendUrl),v=we(p=>p.setBackendUrl),y=B(p=>p.febboxKey),S=B(p=>p.setFebboxKey),j=B(p=>p.realDebridKey),w=B(p=>p.setRealDebridKey),D=B(p=>p.enableThumbnails),N=B(p=>p.setEnableThumbnails),E=B(p=>p.enableAutoplay),k=B(p=>p.setEnableAutoplay),A=B(p=>p.enableSkipCredits),O=B(p=>p.setEnableSkipCredits),T=B(p=>p.sourceOrder),I=B(p=>p.setSourceOrder),F=B(p=>p.enableDiscover),K=B(p=>p.setEnableDiscover),_=B(p=>p.enableFeatured),$=B(p=>p.setEnableFeatured),ee=B(p=>p.enableDetailsModal),pe=B(p=>p.setEnableDetailsModal),Ge=B(p=>p.enableImageLogos),qe=B(p=>p.setEnableImageLogos),te=B(p=>p.enableSourceOrder),Je=B(p=>p.setEnableSourceOrder),je=B(p=>p.proxyTmdb),Ke=B(p=>p.setProxyTmdb),Ze=B(p=>p.enableCarouselView),q=B(p=>p.setEnableCarouselView),Ce=B(p=>p.forceCompactEpisodeView),De=B(p=>p.setForceCompactEpisodeView),P=B(p=>p.enableLowPerformanceMode),J=B(p=>p.setEnableLowPerformanceMode),V=we(p=>p.account),W=we(p=>p.setAccountProfile),xe=we(p=>p.updateDeviceName),M=u.useMemo(()=>V?tr(V.deviceName,rs(V.seed)):"",[V]),ne=on(),{logout:oe}=ar(),ke=we();u.useEffect(()=>{(async()=>{if(V&&ne){const U=await zi(ne,V);U.febboxKey&&S(U.febboxKey),U.realDebridKey&&w(U.realDebridKey)}})()},[V,ne,S,w]);const m=Wi(t,o,c,M,b,g,y,j,V?V.profile:void 0,D,E,F,_,ee,T,te,je,A,Ge,Ze,Ce,P),Me=u.useMemo(()=>{const p=ur().listSources(),U=p.map(Se=>Se.id),z=m.sourceOrder.state,rt=z.filter(Se=>U.includes(Se)),it=p.filter(Se=>!z.includes(Se.id)).map(Se=>Se.id);return[...rt,...it]},[m.sourceOrder.state]);u.useEffect(()=>{i(t??"default")},[i,t]),u.useEffect(()=>()=>{i(null)},[i]);const Ue=u.useCallback(p=>{m.theme.set(p==="default"?null:p),i(p)},[m.theme,i]),gt=u.useCallback(async()=>{var p,U;if(V&&ne){if((m.appLanguage.changed||m.theme.changed||m.proxyUrls.changed||m.febboxKey.changed||m.realDebridKey.changed||m.enableThumbnails.changed||m.enableAutoplay.changed||m.enableSkipCredits.changed||m.enableDiscover.changed||m.enableFeatured.changed||m.enableDetailsModal.changed||m.enableImageLogos.changed||m.sourceOrder.changed||m.enableSourceOrder.changed||m.proxyTmdb.changed||m.enableCarouselView.changed||m.forceCompactEpisodeView.changed||m.enableLowPerformanceMode.changed)&&await Li(ne,V,{applicationLanguage:m.appLanguage.state,applicationTheme:m.theme.state,proxyUrls:((p=m.proxyUrls.state)==null?void 0:p.filter(z=>z!==""))??null,febboxKey:m.febboxKey.state,realDebridKey:m.realDebridKey.state,enableThumbnails:m.enableThumbnails.state,enableAutoplay:m.enableAutoplay.state,enableSkipCredits:m.enableSkipCredits.state,enableDiscover:m.enableDiscover.state,enableFeatured:m.enableFeatured.state,enableDetailsModal:m.enableDetailsModal.state,enableImageLogos:m.enableImageLogos.state,sourceOrder:m.sourceOrder.state,enableSourceOrder:m.enableSourceOrder.state,proxyTmdb:m.proxyTmdb.state,enableCarouselView:m.enableCarouselView.state,forceCompactEpisodeView:m.forceCompactEpisodeView.state,enableLowPerformanceMode:m.enableLowPerformanceMode.state}),m.deviceName.changed){const z=await _i(m.deviceName.state,rs(V.seed));await Bi(ne,V,{deviceName:z}),xe(z)}m.profile.changed&&await Fi(ne,V,{profile:m.profile.state})}if(N(m.enableThumbnails.state),k(m.enableAutoplay.state),O(m.enableSkipCredits.state),K(m.enableDiscover.state),$(m.enableFeatured.state),pe(m.enableDetailsModal.state),qe(m.enableImageLogos.state),I(m.sourceOrder.state),l(m.appLanguage.state),n(m.theme.state),f(m.subtitleStyling.state),h(((U=m.proxyUrls.state)==null?void 0:U.filter(z=>z!==""))??null),Je(m.enableSourceOrder.state),S(m.febboxKey.state),w(m.realDebridKey.state),Ke(m.proxyTmdb.state),q(m.enableCarouselView.state),De(m.forceCompactEpisodeView.state),J(m.enableLowPerformanceMode.state),m.profile.state&&W(m.profile.state),m.backendUrl.changed){await oe();let z=m.backendUrl.state;z&&!z.startsWith("http://")&&!z.startsWith("https://")&&(z=`https://${z}`),v(z)}},[V,ne,N,S,w,m,k,O,K,$,pe,qe,I,l,n,f,h,xe,W,oe,v,Je,Ke,q,De,J]);return s.jsxs(Ki,{children:[s.jsx(Ui,{subpage:!0,k:"global.pages.settings"}),s.jsxs(Rl,{children:[s.jsxs("div",{id:"settings-account",children:[s.jsx(cn,{border:!0,className:"!mb-0",children:e("settings.account.title")}),ke.account&&m.profile.state?s.jsx(Al,{account:ke.account,deviceName:m.deviceName.state,setDeviceName:m.deviceName.set,colorA:m.profile.state.colorA,setColorA:p=>{m.profile.set(U=>U?{...U,colorA:p}:void 0)},colorB:m.profile.state.colorB,setColorB:p=>m.profile.set(U=>U?{...U,colorB:p}:void 0),userIcon:m.profile.state.icon,setUserIcon:p=>m.profile.set(U=>U?{...U,icon:p}:void 0)}):s.jsx(ha,{})]}),s.jsx("div",{className:"mt-10",children:s.jsx(Ba,{})}),s.jsx("div",{id:"settings-preferences",className:"mt-28",children:s.jsx(Ol,{language:m.appLanguage.state,setLanguage:m.appLanguage.set,enableThumbnails:m.enableThumbnails.state,setEnableThumbnails:m.enableThumbnails.set,enableAutoplay:m.enableAutoplay.state,setEnableAutoplay:m.enableAutoplay.set,enableSkipCredits:m.enableSkipCredits.state,setEnableSkipCredits:m.enableSkipCredits.set,sourceOrder:Me,setSourceOrder:m.sourceOrder.set,enableSourceOrder:m.enableSourceOrder.state,setenableSourceOrder:m.enableSourceOrder.set,enableLowPerformanceMode:m.enableLowPerformanceMode.state,setEnableLowPerformanceMode:m.enableLowPerformanceMode.set})}),s.jsx("div",{id:"settings-appearance",className:"mt-28",children:s.jsx(ra,{active:r??"default",inUse:t??"default",setTheme:Ue,enableDiscover:m.enableDiscover.state,setEnableDiscover:m.enableDiscover.set,enableFeatured:m.enableFeatured.state,setEnableFeatured:m.enableFeatured.set,enableDetailsModal:m.enableDetailsModal.state,setEnableDetailsModal:m.enableDetailsModal.set,enableImageLogos:m.enableImageLogos.state,setEnableImageLogos:m.enableImageLogos.set,enableCarouselView:m.enableCarouselView.state,setEnableCarouselView:m.enableCarouselView.set,forceCompactEpisodeView:m.forceCompactEpisodeView.state,setForceCompactEpisodeView:m.forceCompactEpisodeView.set,enableLowPerformanceMode:m.enableLowPerformanceMode.state})}),s.jsx("div",{id:"settings-captions",className:"mt-28",children:s.jsx(ia,{styling:m.subtitleStyling.state,setStyling:m.subtitleStyling.set})}),s.jsx("div",{id:"settings-connection",className:"mt-28",children:s.jsx(fa,{backendUrl:m.backendUrl.state,setBackendUrl:m.backendUrl.set,proxyUrls:m.proxyUrls.state,setProxyUrls:m.proxyUrls.set,febboxKey:m.febboxKey.state,setFebboxKey:m.febboxKey.set,realDebridKey:m.realDebridKey.state,setRealDebridKey:m.realDebridKey.set,proxyTmdb:m.proxyTmdb.state,setProxyTmdb:m.proxyTmdb.set})})]}),s.jsxs(lr,{animation:"fade",show:m.changed,className:"bg-settings-saveBar-background border-t border-settings-card-border/50 py-4 transition-opacity w-full fixed bottom-0 flex justify-between flex-col md:flex-row px-8 items-start md:items-center gap-3 z-[999]",children:[s.jsx("p",{className:"text-type-danger",children:e("settings.unsaved")}),s.jsxs("div",{className:"space-x-3 w-full md:w-auto flex",children:[s.jsx(Ee,{className:"w-full md:w-auto",theme:"secondary",onClick:m.reset,children:e("settings.reset")}),s.jsx(Ee,{className:"w-full md:w-auto",theme:"purple",onClick:gt,children:e("settings.save")})]})]})]})}export{Al as AccountSettings,Ll as SettingsPage,Ll as default};
//# sourceMappingURL=Settings-BhilNUbC.js.map
